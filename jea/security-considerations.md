---
ms.date: 06/12/2017
author: rpsqrd
ms.topic: conceptual
keywords: jea,powershell,security
title: Considérations de sécurité JEA
ms.openlocfilehash: 1b83a73c047b056a4cc094d7e4b0bbf31f75f53a
ms.sourcegitcommit: cf195b090b3223fa4917206dfec7f0b603873cdf
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/09/2018
---
# <a name="jea-security-considerations"></a><span data-ttu-id="03625-103">Considérations de sécurité JEA</span><span class="sxs-lookup"><span data-stu-id="03625-103">JEA Security Considerations</span></span>

> <span data-ttu-id="03625-104">S’applique à : Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="03625-104">Applies to: Windows PowerShell 5.0</span></span>

<span data-ttu-id="03625-105">JEA vous aide à améliorer votre sécurité en réduisant le nombre d’administrateurs permanents sur vos machines.</span><span class="sxs-lookup"><span data-stu-id="03625-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span>
<span data-ttu-id="03625-106">Il le fait en créant un nouveau point d’entrée pour les utilisateurs leur permettant de gérer le système (une configuration de session PowerShell), qui est étroitement verrouillé par défaut pour empêcher toute utilisation malveillante.</span><span class="sxs-lookup"><span data-stu-id="03625-106">It does so by creating a new entry point for users to manage the system (a PowerShell session configuration) which is tightly locked down by default to prevent misuse.</span></span>
<span data-ttu-id="03625-107">Les utilisateurs ayant besoin d’un accès non forcément illimité à la machine pour effectuer des tâches d’administration peuvent avoir accès au point de terminaison JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-107">Users who need some, but not unlimited, access to the machine to perform administrative tasks can be granted access to the JEA endpoint.</span></span>
<span data-ttu-id="03625-108">JEA les autorisant à exécuter des commandes d’administration sans disposer directement d’un accès administrateur, vous pouvez ensuite supprimer des utilisateurs de groupes de sécurité disposant de privilèges élevés (en les rendant utilisateurs standard).</span><span class="sxs-lookup"><span data-stu-id="03625-108">Because JEA allows them to run admin commands without directly having admin access, you can then remove those users from highly privileged security groups (make them standard users).</span></span>

<span data-ttu-id="03625-109">Cette rubrique décrit le modèle de sécurité JEA et les bonnes pratiques en détail.</span><span class="sxs-lookup"><span data-stu-id="03625-109">This topic describes the JEA security model and best practices in more detail.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="03625-110">compte d'identification</span><span class="sxs-lookup"><span data-stu-id="03625-110">Run As account</span></span>

<span data-ttu-id="03625-111">Chaque point de terminaison JEA possède un compte d’identification désigné, qui est le compte sous lequel sont effectuées les actions de l’utilisateur qui se connecte.</span><span class="sxs-lookup"><span data-stu-id="03625-111">Each JEA endpoint has a designated "run as" account, which is the account under which the connecting user's actions are performed.</span></span>
<span data-ttu-id="03625-112">Ce compte est configurable dans le [fichier de configuration de session](session-configurations.md), et le compte que vous choisissez a une incidence considérable sur la sécurité de votre point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="03625-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="03625-113">**Les comptes virtuels** sont la méthode recommandée de configuration du compte d’identification.</span><span class="sxs-lookup"><span data-stu-id="03625-113">**Virtual accounts** are the recommended way of configuring the run as account.</span></span>
<span data-ttu-id="03625-114">Les comptes virtuels sont des comptes locaux à usage unique temporaires, qui sont créés pour l’utilisateur qui se connecte à utiliser pendant la durée de sa session JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span>
<span data-ttu-id="03625-115">Dès que la session est terminée, le compte virtuel est détruit et ne peut plus être utilisé.</span><span class="sxs-lookup"><span data-stu-id="03625-115">As soon as their session is terminated, the virtual account will be destroyed and cannot be used anymore.</span></span>
<span data-ttu-id="03625-116">L’utilisateur qui se connecte ne connaît pas les informations d’identification pour le compte virtuel et ne peut pas utiliser le compte virtuel pour accéder au système par d’autres moyens, notamment le Bureau à distance ou un point de terminaison PowerShell sans contrainte.</span><span class="sxs-lookup"><span data-stu-id="03625-116">The connecting user does not know the credentials for the virtual account and cannot use the virtual account to access the system via other means, such as Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="03625-117">Par défaut, les comptes virtuels appartiennent au groupe Administrateurs local sur la machine.</span><span class="sxs-lookup"><span data-stu-id="03625-117">By default, virtual accounts belong to the local administrators group on the machine.</span></span>
<span data-ttu-id="03625-118">Ainsi, ils disposent des droits complets pour gérer n’importe quel élément sur le système, mais pas de droits pour gérer les ressources sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="03625-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="03625-119">Lors de l’authentification sur d’autres machines, le contexte de l’utilisateur est celui du compte d’ordinateur local, pas le compte virtuel.</span><span class="sxs-lookup"><span data-stu-id="03625-119">When authenticating with other machines, the user context will be that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="03625-120">Les contrôleurs de domaine constituent un cas particulier, car il n’existe aucun concept de groupe d’administrateurs locaux.</span><span class="sxs-lookup"><span data-stu-id="03625-120">Domain controllers are a special case since there is no concept of a local administrators group.</span></span>
<span data-ttu-id="03625-121">Au lieu de cela, les comptes virtuels appartiennent aux Administrateurs du domaine et peuvent gérer les services d’annuaire sur le contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="03625-121">Instead, virtual accounts belong to Domain Admins instead and can manage the directory services on the domain controller.</span></span>
<span data-ttu-id="03625-122">L’identité du domaine est toujours limitée à une utilisation sur le contrôleur de domaine où la session JEA a été instanciée, et tout accès au réseau semblera provenir de l’objet ordinateur de contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="03625-122">The domain identity is still restricted to use on the domain controller where the JEA session was instantiated, and any network access will appear to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="03625-123">Dans les deux cas, vous pouvez également définir explicitement les groupes de sécurité auxquels le compte virtuel doit appartenir.</span><span class="sxs-lookup"><span data-stu-id="03625-123">In both cases, you can also explicitly define which security groups the virtual account should belong to.</span></span>
<span data-ttu-id="03625-124">Il s’agit d’une bonne pratique si la tâche que vous effectuez peut être réalisée sans privilèges d’administrateur local ou de domaine.</span><span class="sxs-lookup"><span data-stu-id="03625-124">This is a good practice when the task you are performing can be done without local/domain admin privileges.</span></span>
<span data-ttu-id="03625-125">Si vous disposez déjà d’un groupe de sécurité défini pour vos administrateurs, vous pouvez simplement accorder l’appartenance au compte virtuel à ce groupe afin de lui donner les autorisations dont il a besoin.</span><span class="sxs-lookup"><span data-stu-id="03625-125">If you already have a security group defined for your admins, you can simply grant the virtual account membership to that group to give it the permissions it needs.</span></span>
<span data-ttu-id="03625-126">L’appartenance au groupe de compte virtuel est limitée aux groupes de sécurité locaux sur la station de travail et les serveurs membres, mais il ne peut s’agir que de membres de groupes de sécurité de domaine sur un contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="03625-126">Virtual account group membership is limited to local security groups on workstation and member servers, but on a domain controller they can only be members of domain security groups.</span></span>
<span data-ttu-id="03625-127">Une fois que vous spécifiez un ou plusieurs groupes de sécurité auquel le compte virtuel doit appartenir, ils n’appartiennent plus aux groupes par défaut (administrateur local ou administrateur de domaine).</span><span class="sxs-lookup"><span data-stu-id="03625-127">Once you specify one or more security groups for the virtual account to belong to, it will no longer belong to the default groups (local admin or domain admin).</span></span>

<span data-ttu-id="03625-128">Le tableau ci-dessous résume les options de configuration possibles et les autorisations qui en résultent pour les comptes virtuels</span><span class="sxs-lookup"><span data-stu-id="03625-128">The table below summarizes the possible configuration options and resulting permissions for virtual accounts</span></span>

<span data-ttu-id="03625-129">Type d’ordinateur</span><span class="sxs-lookup"><span data-stu-id="03625-129">Computer type</span></span>                | <span data-ttu-id="03625-130">Configuration du groupe du compte virtuel</span><span class="sxs-lookup"><span data-stu-id="03625-130">Virtual account group configuration</span></span> | <span data-ttu-id="03625-131">Contexte de l’utilisateur local</span><span class="sxs-lookup"><span data-stu-id="03625-131">Local user context</span></span>                                      | <span data-ttu-id="03625-132">Contexte de l’utilisateur réseau</span><span class="sxs-lookup"><span data-stu-id="03625-132">Network user context</span></span>
-----------------------------|-------------------------------------|---------------------------------------------------------|--------------------------------------------------
<span data-ttu-id="03625-133">Contrôleur de domaine</span><span class="sxs-lookup"><span data-stu-id="03625-133">Domain controller</span></span>            | <span data-ttu-id="03625-134">Par défaut</span><span class="sxs-lookup"><span data-stu-id="03625-134">Default</span></span>                             | <span data-ttu-id="03625-135">Utilisateur de domaine, membre de « *DOMAIN*\Domain Admins »</span><span class="sxs-lookup"><span data-stu-id="03625-135">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="03625-136">Compte d'ordinateur</span><span class="sxs-lookup"><span data-stu-id="03625-136">Computer account</span></span>
<span data-ttu-id="03625-137">Contrôleur de domaine</span><span class="sxs-lookup"><span data-stu-id="03625-137">Domain controller</span></span>            | <span data-ttu-id="03625-138">Groupes de domaine A et B</span><span class="sxs-lookup"><span data-stu-id="03625-138">Domain groups A and B</span></span>               | <span data-ttu-id="03625-139">Utilisateur de domaine, membre de « *DOMAIN*\A », « *DOMAIN*\B »</span><span class="sxs-lookup"><span data-stu-id="03625-139">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="03625-140">Compte d'ordinateur</span><span class="sxs-lookup"><span data-stu-id="03625-140">Computer account</span></span>
<span data-ttu-id="03625-141">Serveur membre ou station de travail</span><span class="sxs-lookup"><span data-stu-id="03625-141">Member server or workstation</span></span> | <span data-ttu-id="03625-142">Par défaut</span><span class="sxs-lookup"><span data-stu-id="03625-142">Default</span></span>                             | <span data-ttu-id="03625-143">Utilisateur local, membre de « *BUILTIN*\Administrators »</span><span class="sxs-lookup"><span data-stu-id="03625-143">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="03625-144">Compte d'ordinateur</span><span class="sxs-lookup"><span data-stu-id="03625-144">Computer account</span></span>
<span data-ttu-id="03625-145">Serveur membre ou station de travail</span><span class="sxs-lookup"><span data-stu-id="03625-145">Member server or workstation</span></span> | <span data-ttu-id="03625-146">Groupes locaux C et D</span><span class="sxs-lookup"><span data-stu-id="03625-146">Local groups C and D</span></span>                | <span data-ttu-id="03625-147">Utilisateur local, le membre de« *COMPUTER*\C » et « *COMPUTER*\D »</span><span class="sxs-lookup"><span data-stu-id="03625-147">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="03625-148">Compte d'ordinateur</span><span class="sxs-lookup"><span data-stu-id="03625-148">Computer account</span></span>

<span data-ttu-id="03625-149">Lorsque vous examinez les événements d’audit de sécurité et les journaux des événements de l’application, vous voyez que chaque session d’utilisateur JEA a un compte virtuel unique.</span><span class="sxs-lookup"><span data-stu-id="03625-149">When you look at security audit events and application event logs, you will see that each JEA user session has a unique virtual account.</span></span>
<span data-ttu-id="03625-150">Cela vous permet de suivre les actions de l’utilisateur dans un point de terminaison JEA jusqu’à l’utilisateur d’origine qui a exécuté la commande.</span><span class="sxs-lookup"><span data-stu-id="03625-150">This helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span>
<span data-ttu-id="03625-151">Les noms de compte virtuel sont au format « Utilisateurs virtuels WinRM \\WinRM\_VA\_*ACCOUNTNUMBER*\_*DOMAINE*\_*sAMAccountName* ». Par exemple, si l’utilisateur « Alice » dans le domaine « Contoso » redémarre un service dans un point de terminaison JEA, le nom d’utilisateur associé à des événements du Gestionnaire de contrôle des services est « Utilisateurs virtuels WinRM\\WinRM\_VA\_1\_contoso\_alice ».</span><span class="sxs-lookup"><span data-stu-id="03625-151">Virtual account names follow the format "WinRM Virtual Users\\WinRM\_VA\_*ACCOUNTNUMBER*\_*DOMAIN*\_*sAMAccountName*" For example, if user "Alice" in domain "Contoso" restarts a service in a JEA endpoint, the username associated with any service control manager events would be "WinRM Virtual Users\\WinRM\_VA\_1\_contoso\_alice".</span></span>


<span data-ttu-id="03625-152">Les **comptes de service administrés de groupe (gMSA)** sont utiles lorsqu’un serveur membre doit avoir accès aux ressources réseau dans la session JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-152">**Group managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span>
<span data-ttu-id="03625-153">Un exemple de cas d’utilisation est un point de terminaison JEA utilisé pour contrôler l’accès à une API REST hébergée sur une autre machine.</span><span class="sxs-lookup"><span data-stu-id="03625-153">An example use case for this is a JEA endpoint that is used to control access to a REST API hosted on a different machine.</span></span>
<span data-ttu-id="03625-154">Il est facile d’écrire des fonctions pour effectuer les appels souhaités de l’API REST, mais vous avez besoin d’une identité réseau pour vous authentifier auprès de l’API.</span><span class="sxs-lookup"><span data-stu-id="03625-154">It is easy to write functions to make the desired invocations on the REST API, but in order to authenticate with the API you need a network identity.</span></span>
<span data-ttu-id="03625-155">Un compte de service administré de groupe rend possible le « second tronçon » tout en conservant le contrôle avec lequel les ordinateurs peuvent utiliser le compte.</span><span class="sxs-lookup"><span data-stu-id="03625-155">Using a group managed service account makes the "second hop" possible while still having control over which computers can use the account.</span></span>
<span data-ttu-id="03625-156">Les autorisations effectives du gMSA sont définies par les groupes de sécurité (locaux ou de domaine) auquel appartient le compte gMSA.</span><span class="sxs-lookup"><span data-stu-id="03625-156">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="03625-157">Lorsqu’un point de terminaison JEA est configuré pour utiliser un compte gMSA, les actions de tous les utilisateurs JEA semblent provenir du même compte de service administré de groupe.</span><span class="sxs-lookup"><span data-stu-id="03625-157">When a JEA endpoint is configured to use a gMSA account, the actions of all JEA users will appear to come from the same group managed service account.</span></span>
<span data-ttu-id="03625-158">La seule manière de tracer des actions jusqu’à un utilisateur spécifique consiste à identifier le jeu de commandes exécuté dans une transcription de session PowerShell.</span><span class="sxs-lookup"><span data-stu-id="03625-158">The only way you can trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="03625-159">Les **informations d’identification de relais** sont utilisées lorsque vous ne spécifiez pas une exécution en tant que compte et que vous voulez que PowerShell utilise les informations d’identification de connexion de l’utilisateur pour exécuter des commandes sur le serveur distant.</span><span class="sxs-lookup"><span data-stu-id="03625-159">**Pass-thru credentials** are used when you do not specify a run as account and want PowerShell to use the connecting user's credential to run commands on the remote server.</span></span>
<span data-ttu-id="03625-160">Cette configuration n’est *pas* recommandée pour JEA, car elle vous oblige à accorder un accès direct à l’utilisateur qui se connecte à des groupes d’administration privilégiés.</span><span class="sxs-lookup"><span data-stu-id="03625-160">This configuration is *not* recommended for JEA as it would require you to grant the connecting user direct access to privileged management groups.</span></span>
<span data-ttu-id="03625-161">Si l’utilisateur connecté possède déjà des privilèges d’administrateur, il peut éviter JEA et gérer le système par d’autres moyens sans contrainte.</span><span class="sxs-lookup"><span data-stu-id="03625-161">If the connecting user already has admin privileges, they can avoid JEA altogether and manage the system via other, unconstrained means.</span></span>
<span data-ttu-id="03625-162">Consultez la section ci-dessous pour en savoir plus et découvrir comment [JEA ne protège pas contre les administrateurs](#jea-does-not-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="03625-162">See the section below on how [JEA does not protect against admins](#jea-does-not-protect-against-admins) for more information.</span></span>

<span data-ttu-id="03625-163">**L’exécution standard en tant que comptes** vous permet de spécifier un compte d’utilisateur quelconque sous lequel l’ensemble de la session PowerShell est exécuté.</span><span class="sxs-lookup"><span data-stu-id="03625-163">**Standard run as accounts** allow you to specify any user account under which the entire PowerShell session will run.</span></span>
<span data-ttu-id="03625-164">Cette distinction est importante, car une configuration de session définie avec une exécution fixe de compte (avec le paramètre `-RunAsCredential`) ne prend pas JEA en charge.</span><span class="sxs-lookup"><span data-stu-id="03625-164">This is an important distinction, because a session configuration set to use a fixed run as account (with the `-RunAsCredential` parameter) is not JEA-aware.</span></span>
<span data-ttu-id="03625-165">Cela signifie que les définitions de rôles ne fonctionnent plus comme prévu, et que chaque utilisateur autorisé à accéder au point de terminaison se voit attribuer le même rôle.</span><span class="sxs-lookup"><span data-stu-id="03625-165">That means that role definitions no longer function as expected, and every user authorized to access the endpoint will be assigned the same role.</span></span>

<span data-ttu-id="03625-166">Vous ne devez pas utiliser un RunAsCredential sur un point de terminaison JEA en raison de la difficulté de suivi des actions à des utilisateurs spécifiques et l’absence de prise en charge pour le mappage des utilisateurs aux rôles.</span><span class="sxs-lookup"><span data-stu-id="03625-166">You should not use a RunAsCredential on a JEA endpoint because of the difficulty in tracing actions back to specific users and the lack of support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="03625-167">Liste de contrôle d’accès de point de terminaison WinRM</span><span class="sxs-lookup"><span data-stu-id="03625-167">WinRM Endpoint ACL</span></span>

<span data-ttu-id="03625-168">Comme avec des points de terminaison PowerShell à distance standard, chaque point de terminaison JEA a une liste de contrôle d’accès (ACL) distincte définie dans la configuration de WinRM qui contrôle les utilisateurs pouvant s’authentifier auprès du point de terminaison JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-168">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) set in the WinRM configuration that controls who can authenticate with the JEA endpoint.</span></span>
<span data-ttu-id="03625-169">S’il est mal configuré, les utilisateurs approuvés ne peuvent pas accéder au point de terminaison JEA et/ou des utilisateurs non approuvés peuvent y accéder.</span><span class="sxs-lookup"><span data-stu-id="03625-169">If improperly configured, trusted users may not be able to access the JEA endpoint and/or untrusted users may gain access.</span></span>
<span data-ttu-id="03625-170">Toutefois, la liste de contrôle d’accès WinRM n’affecte pas le mappage des utilisateurs sur les rôles JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-170">The WinRM ACL does not, however, affect the mapping of users to JEA roles.</span></span>
<span data-ttu-id="03625-171">Ce dernier est contrôlé par le champ *RoleDefinitions* dans le fichier de configuration de session qui a été inscrit sur le système.</span><span class="sxs-lookup"><span data-stu-id="03625-171">That is controlled by the *RoleDefinitions* field in the session configuration file that was registered on the system.</span></span>

<span data-ttu-id="03625-172">Par défaut, lorsque vous inscrivez un point de terminaison JEA à l’aide d’un fichier de configuration de session et une ou plusieurs fonctions de rôle, la liste de contrôle d’accès WinRM est configurée de manière à autoriser tous les utilisateurs mappés sur un ou plusieurs rôles à accéder au point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="03625-172">By default, when you register a JEA endpoint using a session configuration file and one or more role capabilities, the WinRM ACL will be configured to allow all users mapping to one or more roles access to the endpoint.</span></span>
<span data-ttu-id="03625-173">Par exemple, une session JEA configurée à l’aide des commandes suivantes accorde un accès complet à *CONTOSO\JEA\_Lev1* et à *CONTOSO\JEA\_Lev2*.</span><span class="sxs-lookup"><span data-stu-id="03625-173">For example, a JEA session configured using the following commands will grant full access to *CONTOSO\JEA\_Lev1* and *CONTOSO\JEA\_Lev2*.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="03625-174">Vous pouvez auditer les autorisations des utilisateurs avec l’applet de commande [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration).</span><span class="sxs-lookup"><span data-stu-id="03625-174">You can audit user permissions with the [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
PS C:\> Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission

Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="03625-175">Pour modifier les utilisateurs disposant d’un accès, exécutez `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` pour une invite interactive ou `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` pour mettre à jour les autorisations.</span><span class="sxs-lookup"><span data-stu-id="03625-175">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span>
<span data-ttu-id="03625-176">Les utilisateurs doivent au moins disposer de droits *Invoke* pour accéder au point de terminaison JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-176">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="03625-177">Si des utilisateurs ont accès au point de terminaison JEA mais n’appartiennent à aucun des rôles définis dans le fichier de configuration de session, ils seront en mesure de démarrer une session JEA mais auront uniquement accès aux applets de commande par défaut.</span><span class="sxs-lookup"><span data-stu-id="03625-177">If additional users are granted access to the JEA endpoint but do not fall into any of the roles defined in the session configuration file, they will be able to start a JEA session but only have access to the default cmdlets.</span></span>
<span data-ttu-id="03625-178">Vous pouvez auditer les autorisations utilisateur dans un point de terminaison JEA en exécutant `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="03625-178">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span>
<span data-ttu-id="03625-179">Lisez l’article [Audit et rapports dans JEA](audit-and-report.md) pour plus d’informations sur l’audit des commandes auxquelles un utilisateur a accès dans un point de terminaison JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-179">Check out the [Auditing and Reporting on JEA](audit-and-report.md) article for more information about auditing which commands a user has access to in a JEA endpoint.</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="03625-180">Rôles avec des privilèges minimum</span><span class="sxs-lookup"><span data-stu-id="03625-180">Least privilege roles</span></span>

<span data-ttu-id="03625-181">Lorsque vous concevez des rôles JEA, il est important de se rappeler que le compte virtuel ou le compte de service administré de groupe exécuté en arrière-plan a souvent un accès illimité pour gérer la machine locale.</span><span class="sxs-lookup"><span data-stu-id="03625-181">When designing JEA roles, it is important to remember that the virtual or group managed service account running behind the scenes often has unrestricted access to manage the local machine.</span></span>
<span data-ttu-id="03625-182">Les fonctionnalités de rôles JEA permettent de restreindre les possibilités d’utilisation de ce compte en limitant les commandes et les applications qui peuvent être exécutées à l’aide de ce contexte privilégié.</span><span class="sxs-lookup"><span data-stu-id="03625-182">JEA role capabilities help restrict what that account can be used for by limiting the commands and applications that can be run using that privileged context.</span></span>
<span data-ttu-id="03625-183">Les rôles incorrectement conçus peuvent autoriser l’exécution de commandes dangereuses qui peuvent autoriser un utilisateur à sortir des limites JEA ou à accéder à des informations sensibles.</span><span class="sxs-lookup"><span data-stu-id="03625-183">Improperly designed roles can allow dangerous commands to run that may allow a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="03625-184">Par exemple, examinez l’entrée de fonctionnalités de rôle suivante :</span><span class="sxs-lookup"><span data-stu-id="03625-184">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="03625-185">Cette fonctionnalité de rôle permet aux utilisateurs d’exécuter une applet de commande PowerShell quelconque avec le nom « Process » à partir du module Microsoft.PowerShell.Management.</span><span class="sxs-lookup"><span data-stu-id="03625-185">This role capability allows users to run any PowerShell cmdlet with the noun "Process" from the Microsoft.PowerShell.Management module.</span></span>
<span data-ttu-id="03625-186">Les utilisateurs auront peut-être besoin d’accéder à des applets de commande telles que `Get-Process` pour comprendre quelles applications s’exécutent sur le système et `Stop-Process` pour mettre fin à toute application suspendue.</span><span class="sxs-lookup"><span data-stu-id="03625-186">Users may need to access cmdlets like `Get-Process` to understand what applications are running on the system and `Stop-Process` to kill any hung applications.</span></span>
<span data-ttu-id="03625-187">Toutefois, cette entrée autorise également `Start-Process`, qui peut être utilisé pour lancer un programme arbitraire avec des autorisations d’administrateur complètes.</span><span class="sxs-lookup"><span data-stu-id="03625-187">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span>
<span data-ttu-id="03625-188">Le programme n’a pas besoin d’être installé localement sur le système. Un adversaire pourrait donc lancer simplement un programme sur un partage de fichiers qui donne les privilèges d’administrateur local à l’utilisateur qui se connecte, exécute un logiciel malveillant et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="03625-188">The program doesn't need to be installed locally on the system, so an adversary could simply start a program on a file share that gives the connecting user local admin privileges, runs malware, and more.'</span></span>

<span data-ttu-id="03625-189">Une version plus sécurisée de cette même fonctionnalité de rôle ressemblerait à la version suivante :</span><span class="sxs-lookup"><span data-stu-id="03625-189">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="03625-190">Évitez d’utiliser des caractères génériques dans les fonctionnalités de rôle et veillez à [auditer les autorisations d’utilisateur effectives](audit-and-report.md#check-effective-rights-for-a-specific-user) régulièrement afin de comprendre les commandes auxquelles un utilisateur a accès.</span><span class="sxs-lookup"><span data-stu-id="03625-190">Avoid using wildcards in role capabilities, and be sure to [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) regularly to understand which commands a user has access to.</span></span>

## <a name="jea-does-not-protect-against-admins"></a><span data-ttu-id="03625-191">JEA ne protège pas contre les administrateurs</span><span class="sxs-lookup"><span data-stu-id="03625-191">JEA does not protect against admins</span></span>

<span data-ttu-id="03625-192">L’un des principes fondamentaux de JEA est de permettre à des utilisateurs non administrateurs d’effectuer *certaines* tâches d’administration.</span><span class="sxs-lookup"><span data-stu-id="03625-192">One of the core principles of JEA is that it allows non-admins to perform *some* admin tasks.</span></span>
<span data-ttu-id="03625-193">JEA ne protège pas contre les utilisateurs qui ont déjà des privilèges d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="03625-193">JEA does not protect against those who already have administrator privileges.</span></span>
<span data-ttu-id="03625-194">Les utilisateurs qui appartiennent aux groupes « Admins du domaine », « Administrateurs locaux » ou à d’autres groupes disposant de privilèges élevés dans votre environnement seront toujours en mesure de contourner les protections de JEA en se connectant à l’ordinateur par d’autres moyens.</span><span class="sxs-lookup"><span data-stu-id="03625-194">Users who belong "domain admins," "local admins," or other highly privileged groups in your environment will still be able to get around JEA's protections by signing into the machine via another means.</span></span>
<span data-ttu-id="03625-195">Ils pourraient, par exemple, se connecter à l’aide de RDP, utiliser des consoles MMC distantes ou se connecter à des points de terminaison PowerShell sans contrainte.</span><span class="sxs-lookup"><span data-stu-id="03625-195">They could, for example, sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span>
<span data-ttu-id="03625-196">Les administrateurs locaux sur le système peuvent également modifier les configurations JEA pour autoriser des utilisateurs supplémentaires à gérer le système ou à modifier une capacité de rôle de manière à étendre l’étendue de ce qu’un utilisateur peut faire dans sa session JEA.</span><span class="sxs-lookup"><span data-stu-id="03625-196">Local admins on the system can also modify JEA configurations to allow additional users to manage the system or change a role capability to extend the scope of what a user can do in their JEA session.</span></span>
<span data-ttu-id="03625-197">Il est donc important d’évaluer les autorisations étendues de vos utilisateurs JEA pour voir s’ils peuvent obtenir un accès privilégié au système d’une autre manière.</span><span class="sxs-lookup"><span data-stu-id="03625-197">It is therefore important to evaluate your JEA users' extended permissions to see if there are other ways they could gain privileged access to the system.</span></span>

<span data-ttu-id="03625-198">Une pratique courante consiste à utiliser JEA pour une maintenance régulière quotidienne et à avoir une solution de gestion d’accès privilégiée « just in time » (juste à temps) pour autoriser les utilisateurs à devenir temporairement des administrateurs locaux en cas d’urgence.</span><span class="sxs-lookup"><span data-stu-id="03625-198">A common practice is to use JEA for regular day-to-day maintenance and have a "just in time" privileged access management solution allow users to temporarily become local admins in emergency situations.</span></span>
<span data-ttu-id="03625-199">Ainsi, les utilisateurs ne sont pas des administrateurs de manière permanente sur le système, mais ils peuvent obtenir ces droits si et seulement si un workflow documente leur utilisation de ces autorisations.</span><span class="sxs-lookup"><span data-stu-id="03625-199">This helps ensure users are not permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>