---
ms.date: 06/12/2017
keywords: dsc,powershell,configuration,setup
title: Ressource File DSC
ms.openlocfilehash: b5bc2c305b8cfccbd044274811df631264a24279
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/23/2019
ms.locfileid: "62077328"
---
# <a name="dsc-file-resource"></a><span data-ttu-id="1df3a-103">Ressource File DSC</span><span class="sxs-lookup"><span data-stu-id="1df3a-103">DSC File Resource</span></span>

> <span data-ttu-id="1df3a-104">S’applique à : Windows PowerShell 4.0, Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="1df3a-104">Applies To: Windows PowerShell 4.0, Windows PowerShell 5.0</span></span>

<span data-ttu-id="1df3a-105">La ressource File dans DSC Windows PowerShell fournit un mécanisme permettant de gérer les fichiers et les dossiers sur un nœud cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-105">The File resource in Windows PowerShell Desired State Configuration (DSC) provides a mechanism to manage files and folders on the target node.</span></span> <span data-ttu-id="1df3a-106">**DestinationPath** et **SourcePath** doivent être accessibles par le nœud cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-106">The **DestinationPath** and **SourcePath** must both be accessible by the target Node.</span></span>

## <a name="syntax"></a><span data-ttu-id="1df3a-107">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="1df3a-107">Syntax</span></span>

```
File [string] #ResourceName
{
    DestinationPath = [string]
    [ Attributes = [string[]] { Archive | Hidden | ReadOnly | System }]
    [ Checksum = [string] { CreatedDate | ModifiedDate | SHA-1 | SHA-256 | SHA-512 } ]
    [ Contents = [string] ]
    [ Credential = [PSCredential] ]
    [ Ensure = [string] { Absent | Present } ]
    [ Force = [bool] ]
    [ Recurse = [bool] ]
    [ DependsOn = [string[]] ]
    [ SourcePath = [string] ]
    [ Type = [string] { Directory | File } ]
    [ MatchSource = [bool] ]
}
```

## <a name="properties"></a><span data-ttu-id="1df3a-108">Propriétés</span><span class="sxs-lookup"><span data-stu-id="1df3a-108">Properties</span></span>

|<span data-ttu-id="1df3a-109">Propriété</span><span class="sxs-lookup"><span data-stu-id="1df3a-109">Property</span></span>       |<span data-ttu-id="1df3a-110">Description</span><span class="sxs-lookup"><span data-stu-id="1df3a-110">Description</span></span>                                                                   |<span data-ttu-id="1df3a-111">Obligatoire</span><span class="sxs-lookup"><span data-stu-id="1df3a-111">Required</span></span>|<span data-ttu-id="1df3a-112">Par défaut</span><span class="sxs-lookup"><span data-stu-id="1df3a-112">Default</span></span>|
|---------------|------------------------------------------------------------------------------|--------|-------|
|<span data-ttu-id="1df3a-113">DestinationPath</span><span class="sxs-lookup"><span data-stu-id="1df3a-113">DestinationPath</span></span>|<span data-ttu-id="1df3a-114">L’emplacement, sur le nœud cible, qui doit être défini sur `Present` ou `Absent`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-114">The location, on the target node, you want to ensure is `Present` or `Absent`.</span></span>|<span data-ttu-id="1df3a-115">Oui</span><span class="sxs-lookup"><span data-stu-id="1df3a-115">Yes</span></span>|<span data-ttu-id="1df3a-116">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-116">No</span></span>|
|<span data-ttu-id="1df3a-117">Attributes</span><span class="sxs-lookup"><span data-stu-id="1df3a-117">Attributes</span></span>     |<span data-ttu-id="1df3a-118">L’état souhaité des attributs du fichier ou du répertoire cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-118">The desired state of the attributes for the targeted file or directory.</span></span> <span data-ttu-id="1df3a-119">Les valeurs valides sont **Archive**, **Hidden**, **ReadOnly** et **System**.</span><span class="sxs-lookup"><span data-stu-id="1df3a-119">Valid values are **Archive**, **Hidden**, **ReadOnly**, and **System**.</span></span>|<span data-ttu-id="1df3a-120">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-120">No</span></span>|<span data-ttu-id="1df3a-121">Aucune</span><span class="sxs-lookup"><span data-stu-id="1df3a-121">None</span></span>|
|<span data-ttu-id="1df3a-122">Checksum</span><span class="sxs-lookup"><span data-stu-id="1df3a-122">Checksum</span></span>      |<span data-ttu-id="1df3a-123">Le type de somme de contrôle à utiliser pour déterminer si deux fichiers sont identiques.</span><span class="sxs-lookup"><span data-stu-id="1df3a-123">The checksum type to use when determining whether two files are the same.</span></span> <span data-ttu-id="1df3a-124">Les valeurs valides sont les suivantes : SHA-1, SHA-256, SHA-512, createdDate, modifiedDate.</span><span class="sxs-lookup"><span data-stu-id="1df3a-124">Valid values include: SHA-1, SHA-256, SHA-512, createdDate, modifiedDate.</span></span>|<span data-ttu-id="1df3a-125">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-125">No</span></span>|<span data-ttu-id="1df3a-126">Seul le nom du fichier ou répertoire est comparé.</span><span class="sxs-lookup"><span data-stu-id="1df3a-126">Only the file or directory name is compared.</span></span>|
|<span data-ttu-id="1df3a-127">Contents</span><span class="sxs-lookup"><span data-stu-id="1df3a-127">Contents</span></span>       |<span data-ttu-id="1df3a-128">Valide uniquement si utilisé avec le type `File`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-128">Only valid when used with `File` type.</span></span> <span data-ttu-id="1df3a-129">Indique que le contenu de la valeur Ensure affiche `Present` ou `Absent` à partir du fichier cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-129">Indicates the contents to Ensure are `Present` or `Absent` from the targeted file.</span></span> |<span data-ttu-id="1df3a-130">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-130">No</span></span>|<span data-ttu-id="1df3a-131">Aucune</span><span class="sxs-lookup"><span data-stu-id="1df3a-131">None</span></span>|
|<span data-ttu-id="1df3a-132">Credential</span><span class="sxs-lookup"><span data-stu-id="1df3a-132">Credential</span></span>     |<span data-ttu-id="1df3a-133">Les informations d’identification nécessaires pour accéder aux ressources, telles que des fichiers sources.</span><span class="sxs-lookup"><span data-stu-id="1df3a-133">The credentials that are required to access resources, such as source files.</span></span>|<span data-ttu-id="1df3a-134">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-134">No</span></span>|<span data-ttu-id="1df3a-135">Le compte de l’ordinateur du nœud cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-135">The target node's Computer Account.</span></span> <span data-ttu-id="1df3a-136">(*voir la remarque*)</span><span class="sxs-lookup"><span data-stu-id="1df3a-136">(*see note*)</span></span>|
|<span data-ttu-id="1df3a-137">Ensure</span><span class="sxs-lookup"><span data-stu-id="1df3a-137">Ensure</span></span>         |<span data-ttu-id="1df3a-138">L’état souhaité du fichier ou répertoire cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-138">The desired state of the target file or directory.</span></span> |<span data-ttu-id="1df3a-139">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-139">No</span></span>|<span data-ttu-id="1df3a-140">**Present**</span><span class="sxs-lookup"><span data-stu-id="1df3a-140">**Present**</span></span>|
|<span data-ttu-id="1df3a-141">Force</span><span class="sxs-lookup"><span data-stu-id="1df3a-141">Force</span></span>          |<span data-ttu-id="1df3a-142">Remplace les opérations d’accès qui entraîneraient une erreur (par exemple, le remplacement d’un fichier ou la suppression d’un répertoire qui n’est pas vide).</span><span class="sxs-lookup"><span data-stu-id="1df3a-142">Overrides access operations that would result in an error (such as overwriting a file or deleting a directory that is not empty).</span></span>|<span data-ttu-id="1df3a-143">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-143">No</span></span>|`$false`|
|<span data-ttu-id="1df3a-144">Recurse</span><span class="sxs-lookup"><span data-stu-id="1df3a-144">Recurse</span></span>        |<span data-ttu-id="1df3a-145">Valide uniquement si utilisé avec le type `Directory`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-145">Only valid when used with `Directory` type.</span></span> <span data-ttu-id="1df3a-146">Exécute l’opération d’état de manière récursive sur tous les sous-répertoires.</span><span class="sxs-lookup"><span data-stu-id="1df3a-146">Performs the state operation recursively to all subdirectories.</span></span>|<span data-ttu-id="1df3a-147">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-147">No</span></span>|`$false`|
|<span data-ttu-id="1df3a-148">DependsOn</span><span class="sxs-lookup"><span data-stu-id="1df3a-148">DependsOn</span></span>      |<span data-ttu-id="1df3a-149">Définit une dépendance sur les ressources spécifiées.</span><span class="sxs-lookup"><span data-stu-id="1df3a-149">Sets a dependency on specified resource(s).</span></span> <span data-ttu-id="1df3a-150">Cette ressource s’exécute uniquement après l’exécution réussie de toutes les ressources dépendantes.</span><span class="sxs-lookup"><span data-stu-id="1df3a-150">This resource will only execute after successful execution of any dependent resources.</span></span> <span data-ttu-id="1df3a-151">Vous pouvez spécifier les ressources dépendantes à l’aide de la syntaxe `"[ResourceType]ResourceName"`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-151">You can specify dependent resources using the syntax `"[ResourceType]ResourceName"`.</span></span> <span data-ttu-id="1df3a-152">Voir [about_DependsOn](../../../configurations/resource-depends-on.md)</span><span class="sxs-lookup"><span data-stu-id="1df3a-152">See [about_DependsOn](../../../configurations/resource-depends-on.md)</span></span>|<span data-ttu-id="1df3a-153">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-153">No</span></span>|<span data-ttu-id="1df3a-154">Aucune</span><span class="sxs-lookup"><span data-stu-id="1df3a-154">None</span></span>|
|<span data-ttu-id="1df3a-155">SourcePath</span><span class="sxs-lookup"><span data-stu-id="1df3a-155">SourcePath</span></span>     |<span data-ttu-id="1df3a-156">Chemin à partir duquel copier la ressource de fichier ou de dossier.</span><span class="sxs-lookup"><span data-stu-id="1df3a-156">The path from which to copy the file or folder resource.</span></span>|<span data-ttu-id="1df3a-157">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-157">No</span></span>|<span data-ttu-id="1df3a-158">Aucune</span><span class="sxs-lookup"><span data-stu-id="1df3a-158">None</span></span>|
|<span data-ttu-id="1df3a-159">Type</span><span class="sxs-lookup"><span data-stu-id="1df3a-159">Type</span></span>           |<span data-ttu-id="1df3a-160">Le type de ressource en cours de configuration.</span><span class="sxs-lookup"><span data-stu-id="1df3a-160">The type of resource being configured.</span></span> <span data-ttu-id="1df3a-161">Les valeurs valides sont `Directory` et `File`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-161">Valid values are `Directory` and `File`.</span></span>|<span data-ttu-id="1df3a-162">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-162">No</span></span>|`File`|
|<span data-ttu-id="1df3a-163">MatchSource</span><span class="sxs-lookup"><span data-stu-id="1df3a-163">MatchSource</span></span>    |<span data-ttu-id="1df3a-164">Détermine si la ressource doit contrôler les nouveaux fichiers ajoutés au répertoire source après la copie initiale.</span><span class="sxs-lookup"><span data-stu-id="1df3a-164">Determines if the resource should monitor for new files added to the source directory after the initial copy.</span></span> <span data-ttu-id="1df3a-165">La valeur `$true` indique que, après la copie initiale, les nouveaux fichiers source doivent être copiés dans la destination.</span><span class="sxs-lookup"><span data-stu-id="1df3a-165">A value of `$true` indicates that, after the initial copy, any new source files should be copied to the destination.</span></span> <span data-ttu-id="1df3a-166">Si la valeur est définie sur `$False`, la ressource met en cache le contenu du répertoire source et ignore les fichiers ajoutés après la copie initiale.</span><span class="sxs-lookup"><span data-stu-id="1df3a-166">If set to `$False`, the resource caches the contents of the source directory and ignores any files added after the initial copy.</span></span>|<span data-ttu-id="1df3a-167">Non</span><span class="sxs-lookup"><span data-stu-id="1df3a-167">No</span></span>|`$false`|

> [!WARNING]
> <span data-ttu-id="1df3a-168">Si vous ne spécifiez aucune valeur pour `Credential` ou `PSRunAsCredential` (PS V.5), la ressource utilisera le compte d’ordinateur du nœud cible pour accéder à `SourcePath`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-168">If you do not specify a value for `Credential` or `PSRunAsCredential` (PS V.5), the resource will use the computer account of the target node to access the `SourcePath`.</span></span>  <span data-ttu-id="1df3a-169">Si `SourcePath` représente un partage UNC, cela peut entraîner une erreur « Accès refusé ».</span><span class="sxs-lookup"><span data-stu-id="1df3a-169">When the `SourcePath` is a UNC share, this could result in an "Access Denied" error.</span></span> <span data-ttu-id="1df3a-170">Vérifiez que vos autorisations sont définies en conséquence, ou utilisez les propriétés `Credential` ou `PSRunAsCredential` pour spécifier le compte qui doit être utilisé.</span><span class="sxs-lookup"><span data-stu-id="1df3a-170">Please ensure your permissions are set accordingly, or use the `Credential` or `PSRunAsCredential` properties to specify the account that should be used.</span></span>

## <a name="present-vs-absent"></a><span data-ttu-id="1df3a-171">Présent / Absent</span><span class="sxs-lookup"><span data-stu-id="1df3a-171">Present vs. Absent</span></span>

<span data-ttu-id="1df3a-172">Chaque ressource DSC effectue des opérations différentes selon la valeur que vous spécifiez pour la propriété `Ensure`.</span><span class="sxs-lookup"><span data-stu-id="1df3a-172">Each DSC resource performs different operations based on the value you specify for the `Ensure` property.</span></span> <span data-ttu-id="1df3a-173">Les valeurs que vous spécifiez pour les propriétés ci-dessus déterminent l’opération d’état effectuée.</span><span class="sxs-lookup"><span data-stu-id="1df3a-173">The values you specify for the above properties determines the state operation performed.</span></span>

### <a name="existence"></a><span data-ttu-id="1df3a-174">Existence</span><span class="sxs-lookup"><span data-stu-id="1df3a-174">Existence</span></span>

<span data-ttu-id="1df3a-175">Lorsque vous spécifiez uniquement un `DestinationPath`, la ressource s’assure que le chemin d’accès existe (`Present`) ou n’existe pas (`Absent`).</span><span class="sxs-lookup"><span data-stu-id="1df3a-175">When you only specify a `DestinationPath`, the resource ensures that the path exists (`Present`) or does not exist (`Absent`).</span></span>

### <a name="copy-operations"></a><span data-ttu-id="1df3a-176">Opérations de copie</span><span class="sxs-lookup"><span data-stu-id="1df3a-176">Copy Operations</span></span>

<span data-ttu-id="1df3a-177">Lorsque vous spécifiez un `SourcePath` et un `DestinationPath` avec une valeur `Type` comme **Directory**, la ressource copie le répertoire source dans le chemin d’accès de destination.</span><span class="sxs-lookup"><span data-stu-id="1df3a-177">When you specify a `SourcePath` and a `DestinationPath` with a `Type` value of **Directory**, the resource copies source directory to the destination path.</span></span> <span data-ttu-id="1df3a-178">Les propriétés `Recurse`, `Force` et `MatchSource` modifient le type d’opération de copie effectuée, tandis que `Credential` détermine le compte à utiliser pour accéder au répertoire source.</span><span class="sxs-lookup"><span data-stu-id="1df3a-178">The properties `Recurse`, `Force`, and `MatchSource` change the type of copy operation performed, while `Credential` determines which account to use to access the source directory.</span></span>

### <a name="limitations"></a><span data-ttu-id="1df3a-179">Limitations</span><span class="sxs-lookup"><span data-stu-id="1df3a-179">Limitations</span></span>

<span data-ttu-id="1df3a-180">Si vous avez spécifié une valeur de `ReadOnly` pour la propriété `Attributes` en même temps qu’un `DestinationPath`, `Ensure = "Present"` crée le chemin d’accès spécifié, tandis que `Contents` définit le contenu du fichier.</span><span class="sxs-lookup"><span data-stu-id="1df3a-180">If you specified a value of `ReadOnly` for the `Attributes` property alongside a `DestinationPath`, `Ensure = "Present"` would create the path specified, while `Contents` would set the contents of the file.</span></span>  <span data-ttu-id="1df3a-181">Une opération d’état `Absent` ignore entièrement la propriété `Attributes` et supprime tous les fichiers dans le chemin spécifié.</span><span class="sxs-lookup"><span data-stu-id="1df3a-181">An `Absent` state operation would ignore the `Attributes` property entirely, and remove any file at the specified path.</span></span>

## <a name="example"></a><span data-ttu-id="1df3a-182">Exemple</span><span class="sxs-lookup"><span data-stu-id="1df3a-182">Example</span></span>

<span data-ttu-id="1df3a-183">L’exemple suivant copie un répertoire et ses sous-répertoires d’un serveur Pull vers à un nœud cible à l’aide de la ressource File.</span><span class="sxs-lookup"><span data-stu-id="1df3a-183">The following example copies a directory and its subdirectories from a pull server to a target node using the File Resource.</span></span> <span data-ttu-id="1df3a-184">Si l’opération réussit, la ressource Log consigne un message de confirmation dans le journal des événements.</span><span class="sxs-lookup"><span data-stu-id="1df3a-184">If the operation succeeds, the Log resource writes a confirmation message to the event log.</span></span>

<span data-ttu-id="1df3a-185">Le répertoire source est un chemin d’accès UNC (`\\PullServer\DemoSource`) partagé à partir du serveur Pull.</span><span class="sxs-lookup"><span data-stu-id="1df3a-185">The source directory is a UNC path (`\\PullServer\DemoSource`) shared from the Pull Server.</span></span> <span data-ttu-id="1df3a-186">La propriété `Recurse` s’assure que tous les sous-répertoires sont également copiés.</span><span class="sxs-lookup"><span data-stu-id="1df3a-186">The `Recurse` property ensures that all subdirectories are copied as well.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1df3a-187">Le gestionnaire de configuration local (LCM) sur le nœud cible s’exécute dans le contexte du compte système local par défaut.</span><span class="sxs-lookup"><span data-stu-id="1df3a-187">The LCM on the target Node executes in the context of the local system account by default.</span></span> <span data-ttu-id="1df3a-188">Pour autoriser l’accès à **SourcePath**, accordez les autorisations appropriées au compte d’ordinateur du nœud cible.</span><span class="sxs-lookup"><span data-stu-id="1df3a-188">To grant access to the **SourcePath**, give the target Node's computer account appropriate permissions.</span></span> <span data-ttu-id="1df3a-189">Les deux valeurs **Credential** et **PSDSCRunAsCredential** (v5) modifient le contexte utilisé par le LCM pour accéder à **SourcePath**.</span><span class="sxs-lookup"><span data-stu-id="1df3a-189">The **Credential** and **PSDSCRunAsCredential** (v5) both change the context the LCM uses to access the **SourcePath**.</span></span> <span data-ttu-id="1df3a-190">Vous devez quand même accorder l’accès au compte qui sera utilisé pour accéder à **SourcePath**.</span><span class="sxs-lookup"><span data-stu-id="1df3a-190">You still need to grant access to the account that will be used to access the **SourcePath**.</span></span>

```powershell
Configuration FileResourceDemo
{
    Node "localhost"
    {
        File DirectoryCopy
        {
            Ensure = "Present" # Ensure the directory is Present on the target node.
            Type = "Directory" # The default is File.
            Recurse = $true # Recursively copy all subdirectories.
            SourcePath = "\\PullServer\DemoSource"
            DestinationPath = "C:\Users\Public\Documents\DSCDemo\DemoDestination"
        }

        Log AfterDirectoryCopy
        {
            # The message below gets written to the Microsoft-Windows-Desired State Configuration/Analytic log
            Message = "Finished running the file resource with ID DirectoryCopy"
            DependsOn = "[File]DirectoryCopy" # Depends on successful execution of the File resource.
        }
    }
}
```

<span data-ttu-id="1df3a-191">Pour plus d’informations sur l’utilisation de **Credentials** dans DSC, consultez [Run As User](../../../configurations/runAsUser.md) (Exécuter en tant qu’utilisateur) ou [Config Data Credentials](../../../configurations/configDataCredentials.md) (Informations d’identification des données de configuration).</span><span class="sxs-lookup"><span data-stu-id="1df3a-191">For more on using **Credentials** in DSC see [Run As User](../../../configurations/runAsUser.md) or [Config Data Credentials](../../../configurations/configDataCredentials.md).</span></span>
