---
title: Rapport d’erreurs applet de commande | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- error records [PowerShell], terminating
- non-terminating errors [PowerShell]
- error records [PowerShell]
- terminating errors [PowerShell]
- error records [PowerShell], non-terminating
ms.assetid: 0b014035-52ea-44cb-ab38-bbe463c5465a
caps.latest.revision: 8
ms.openlocfilehash: 45f5934314a2871ceb921c7a66b9dfb658d0bd99
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/23/2019
ms.locfileid: "62068587"
---
# <a name="cmdlet-error-reporting"></a><span data-ttu-id="db7ea-102">Rapport d’erreurs des applets de commande</span><span class="sxs-lookup"><span data-stu-id="db7ea-102">Cmdlet Error Reporting</span></span>

<span data-ttu-id="db7ea-103">Applets de commande doit signaler les erreurs différemment selon si les erreurs sont fin des erreurs ou des erreurs sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-103">Cmdlets should report errors differently depending on whether the errors are terminating errors or nonterminating errors.</span></span> <span data-ttu-id="db7ea-104">Erreurs avec fin d’exécution sont des erreurs qui provoquent le pipeline pour être immédiatement arrêtées ou les erreurs qui se produisent lorsqu’il n’existe aucune raison de continuer le traitement.</span><span class="sxs-lookup"><span data-stu-id="db7ea-104">Terminating errors are errors that cause the pipeline to be terminated immediately, or errors that occur when there is no reason to continue processing.</span></span> <span data-ttu-id="db7ea-105">Erreurs sans fin d’exécution sont les erreurs qui signalent une condition d’erreur actuel, mais l’applet de commande peut continuer à traiter les objets d’entrée.</span><span class="sxs-lookup"><span data-stu-id="db7ea-105">Nonterminating errors are those errors that report a current error condition, but the cmdlet can continue to process input objects.</span></span> <span data-ttu-id="db7ea-106">Avec des erreurs sans fin d’exécution, l’utilisateur est généralement informé du problème, mais l’applet de commande continue de traiter l’objet d’entrée suivant.</span><span class="sxs-lookup"><span data-stu-id="db7ea-106">With nonterminating errors, the user is typically notified of the problem, but the cmdlet continues to process the next input object.</span></span>

## <a name="terminating-and-nonterminating-errors"></a><span data-ttu-id="db7ea-107">Erreurs avec et sans fin d’exécution</span><span class="sxs-lookup"><span data-stu-id="db7ea-107">Terminating and Nonterminating Errors</span></span>

<span data-ttu-id="db7ea-108">Les instructions suivantes peuvent être utilisées pour déterminer si une condition d’erreur est une erreur avec fin ou une erreur sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-108">The following guidelines can be used to determine if an error condition is a terminating error or a nonterminating error.</span></span>

- <span data-ttu-id="db7ea-109">Ne la condition d’erreur empêche votre applet de commande pour traiter correctement les objets davantage d’entrée ?</span><span class="sxs-lookup"><span data-stu-id="db7ea-109">Does the error condition prevent your cmdlet from successfully processing any further input objects?</span></span> <span data-ttu-id="db7ea-110">Dans ce cas, il s’agit d’une erreur avec fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-110">If so, this is a terminating error.</span></span>

- <span data-ttu-id="db7ea-111">La condition d’erreur est liée à un objet d’entrée spécifique ou un sous-ensemble des objets d’entrée ?</span><span class="sxs-lookup"><span data-stu-id="db7ea-111">Is the error condition related to a specific input object or a subset of input objects?</span></span> <span data-ttu-id="db7ea-112">Dans ce cas, il s’agit d’une erreur sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-112">If so, this is a nonterminating error.</span></span>

- <span data-ttu-id="db7ea-113">L’applet de commande accepte des plusieurs objets d’entrée, tels que le traitement peut réussir sur un autre objet d’entrée ?</span><span class="sxs-lookup"><span data-stu-id="db7ea-113">Does the cmdlet accept multiple input objects, such that processing may succeed on another input object?</span></span> <span data-ttu-id="db7ea-114">Dans ce cas, il s’agit d’une erreur sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-114">If so, this is a nonterminating error.</span></span>

- <span data-ttu-id="db7ea-115">Applets de commande qui peut accepter plusieurs objets d’entrée doit décider entre ce qui sont en fin d’exécution et les erreurs sans fin d’exécution, même lorsqu’une situation particulière s’applique à un seul objet d’entrée.</span><span class="sxs-lookup"><span data-stu-id="db7ea-115">Cmdlets that can accept multiple input objects should decide between what are terminating and nonterminating errors, even when a particular situation applies to only a single input object.</span></span>

- <span data-ttu-id="db7ea-116">Applets de commande peut recevoir n’importe quel nombre d’objets d’entrée et envoyer n’importe quel nombre d’objets de réussite ou d’erreur avant de lever une exception de fin.</span><span class="sxs-lookup"><span data-stu-id="db7ea-116">Cmdlets can receive any number of input objects and send any number of success or error objects before throwing a terminating exception.</span></span> <span data-ttu-id="db7ea-117">Il n’existe aucune relation entre le nombre d’objets d’entrée reçus et le nombre d’objets de réussite et d’erreur envoyés.</span><span class="sxs-lookup"><span data-stu-id="db7ea-117">There is no relationship between the number of input objects received and the number of success and error objects sent.</span></span>

- <span data-ttu-id="db7ea-118">Applets de commande qui peut accepter uniquement 0-1 d’entrée d’objets et générer uniquement 0-1 de sortie objets doivent traiter les erreurs comme des erreurs avec fin d’exécution et génèrent des exceptions avec fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-118">Cmdlets that can accept only 0-1 input objects and generate only 0-1 output objects should treat errors as terminating errors and generate terminating exceptions.</span></span>

## <a name="reporting-nonterminating-errors"></a><span data-ttu-id="db7ea-119">Rapports d’erreurs sans fin d’exécution</span><span class="sxs-lookup"><span data-stu-id="db7ea-119">Reporting Nonterminating Errors</span></span>

<span data-ttu-id="db7ea-120">La création de rapports d’une erreur sans fin d’exécution doit toujours être effectuée au sein de l’implémentation de l’applet de commande de la [System.Management.Automation.Cmdlet.BeginProcessing](/dotnet/api/System.Management.Automation.Cmdlet.BeginProcessing) (méthode), le [ System.Management.Automation.Cmdlet.ProcessRecord](/dotnet/api/System.Management.Automation.Cmdlet.ProcessRecord) (méthode), ou le [System.Management.Automation.Cmdlet.EndProcessing](/dotnet/api/System.Management.Automation.Cmdlet.EndProcessing) (méthode).</span><span class="sxs-lookup"><span data-stu-id="db7ea-120">The reporting of a nonterminating error should always be done within the cmdlet's implementation of the [System.Management.Automation.Cmdlet.BeginProcessing](/dotnet/api/System.Management.Automation.Cmdlet.BeginProcessing) method, the [System.Management.Automation.Cmdlet.ProcessRecord](/dotnet/api/System.Management.Automation.Cmdlet.ProcessRecord) method, or the [System.Management.Automation.Cmdlet.EndProcessing](/dotnet/api/System.Management.Automation.Cmdlet.EndProcessing) method.</span></span> <span data-ttu-id="db7ea-121">Ces types d’erreurs sont signalées en appelant le [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) méthode qui à son tour envoie un enregistrement d’erreur dans le flux d’erreurs.</span><span class="sxs-lookup"><span data-stu-id="db7ea-121">These types of errors are reported by calling the [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) method that in turn sends an error record to the error stream.</span></span>

## <a name="reporting-terminating-errors"></a><span data-ttu-id="db7ea-122">Signalement des erreurs avec fin d’exécution</span><span class="sxs-lookup"><span data-stu-id="db7ea-122">Reporting Terminating Errors</span></span>

<span data-ttu-id="db7ea-123">Erreurs avec fin d’exécution sont signalées en levant des exceptions ou en appelant le [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) (méthode).</span><span class="sxs-lookup"><span data-stu-id="db7ea-123">Terminating errors are reported by throwing exceptions or by calling the [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) method.</span></span> <span data-ttu-id="db7ea-124">N’oubliez pas qu’applets de commande peut également intercepter et lever à nouveau les exceptions telles que OutOfMemory, toutefois, ils ne sont pas nécessaires pour relancer des exceptions comme le runtime Windows PowerShell les interceptera également.</span><span class="sxs-lookup"><span data-stu-id="db7ea-124">Be aware that cmdlets can also catch and re-throw exceptions such as OutOfMemory, however, they are not required to re-throw exceptions as the Windows PowerShell runtime will catch them as well.</span></span>

<span data-ttu-id="db7ea-125">Vous pouvez également définir vos propres exceptions pour résoudre les problèmes spécifiques à votre situation, ou ajouter des informations supplémentaires à une exception existante à l’aide de son enregistrement d’erreur.</span><span class="sxs-lookup"><span data-stu-id="db7ea-125">You can also define your own exceptions for issues specific to your situation, or add additional information to an existing exception using its error record.</span></span>

## <a name="error-records"></a><span data-ttu-id="db7ea-126">Enregistrements d’erreur</span><span class="sxs-lookup"><span data-stu-id="db7ea-126">Error Records</span></span>

<span data-ttu-id="db7ea-127">Windows PowerShell décrit une condition d’erreur sans fin d’exécution à l’aide de [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) objets.</span><span class="sxs-lookup"><span data-stu-id="db7ea-127">Windows PowerShell describes a nonterminating error condition through the use of [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) objects.</span></span> <span data-ttu-id="db7ea-128">Chaque [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) objet fournit des informations de catégorie d’erreur, un objet cible facultatif et plus d’informations sur la condition d’erreur.</span><span class="sxs-lookup"><span data-stu-id="db7ea-128">Each [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object provides error category information, an optional target object, and details about the error condition.</span></span>

### <a name="error-identifiers"></a><span data-ttu-id="db7ea-129">Identificateurs d’erreur</span><span class="sxs-lookup"><span data-stu-id="db7ea-129">Error Identifiers</span></span>

<span data-ttu-id="db7ea-130">Identificateur de l’erreur est une chaîne simple qui identifie la condition d’erreur au sein de l’applet de commande.</span><span class="sxs-lookup"><span data-stu-id="db7ea-130">The error identifier is a simple string that identifies the error condition within the cmdlet.</span></span> <span data-ttu-id="db7ea-131">Windows PowerShell associe cet identificateur avec un identificateur de l’applet de commande pour créer un identificateur d’erreur complet qui peut être utilisé ultérieurement lors du filtrage des flux d’erreur ou la journalisation des erreurs lors de la réponse à des erreurs spécifiques, ou avec d’autres activités spécifiques à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="db7ea-131">Windows PowerShell combines this identifier with a cmdlet identifier to create a fully qualified error identifier that can be used later when filtering error streams or logging errors, when responding to specific errors, or with other user-specific activities.</span></span>

<span data-ttu-id="db7ea-132">Lorsque vous spécifiez des identificateurs d’erreur, vous devraient suivre les instructions suivantes.</span><span class="sxs-lookup"><span data-stu-id="db7ea-132">The following guidelines should be followed when specifying error identifiers.</span></span>

- <span data-ttu-id="db7ea-133">Affecter des identificateurs d’erreur différents, très spécifiques, à différents chemins de code.</span><span class="sxs-lookup"><span data-stu-id="db7ea-133">Assign different, highly specific, error identifiers to different code paths.</span></span> <span data-ttu-id="db7ea-134">Chaque chemin d’accès du code qui appelle [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) ou [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) doit avoir son propre identificateur de l’erreur.</span><span class="sxs-lookup"><span data-stu-id="db7ea-134">Each code path that calls [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) or [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) should have its own error identifier.</span></span>

- <span data-ttu-id="db7ea-135">Identificateurs d’erreur doivent être uniques pour les types d’exceptions CLR pour les erreurs avec et sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="db7ea-135">Error identifiers should be unique to CLR exception types for both terminating and nonterminating errors.</span></span>

- <span data-ttu-id="db7ea-136">Ne modifiez pas la sémantique d’un identificateur de l’erreur entre les versions de votre applet de commande ou d’un fournisseur Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="db7ea-136">Do not change the semantics of an error identifier between versions of your cmdlet or Windows PowerShell provider.</span></span> <span data-ttu-id="db7ea-137">Une fois établie la sémantique d’un identificateur de l’erreur, il doit rester constante tout au long du cycle de vie de votre applet de commande.</span><span class="sxs-lookup"><span data-stu-id="db7ea-137">After the semantics of an error identifier is established, it should remain constant throughout the life cycle of your cmdlet.</span></span>

- <span data-ttu-id="db7ea-138">Pour les erreurs avec fin d’exécution, utilisez un identificateur unique d’erreur pour un type particulier d’exception CLR.</span><span class="sxs-lookup"><span data-stu-id="db7ea-138">For terminating errors, use a unique error identifier for a particular CLR exception type.</span></span> <span data-ttu-id="db7ea-139">Si le type d’exception change, utilisez un nouvel identificateur de l’erreur.</span><span class="sxs-lookup"><span data-stu-id="db7ea-139">If the exception type changes, use a new error identifier.</span></span>

- <span data-ttu-id="db7ea-140">Pour les erreurs sans fin d’exécution, utilisez un identificateur de l’erreur spécifique pour un objet d’entrée spécifique.</span><span class="sxs-lookup"><span data-stu-id="db7ea-140">For nonterminating errors, use a specific error identifier for a specific input object.</span></span>

- <span data-ttu-id="db7ea-141">Choisissez le texte pour l’identificateur tersely correspond à l’erreur signalée.</span><span class="sxs-lookup"><span data-stu-id="db7ea-141">Choose text for the identifier that tersely corresponds to the error being reported.</span></span> <span data-ttu-id="db7ea-142">N’utilisez pas les espaces blancs ou des signes de ponctuation.</span><span class="sxs-lookup"><span data-stu-id="db7ea-142">Do not use white space or punctuation.</span></span>

- <span data-ttu-id="db7ea-143">Ne génèrent pas d’identificateurs d’erreur qui ne sont pas reproductibles.</span><span class="sxs-lookup"><span data-stu-id="db7ea-143">Do not generate error identifiers that are not reproducible.</span></span> <span data-ttu-id="db7ea-144">Par exemple, ne génèrent pas les identificateurs qui incluent un identificateur de processus.</span><span class="sxs-lookup"><span data-stu-id="db7ea-144">For example, do not generate identifiers that include a process identifier.</span></span> <span data-ttu-id="db7ea-145">Identificateurs d’erreur sont utiles uniquement lorsqu’ils correspondent aux identificateurs sont visibles par d’autres utilisateurs qui rencontrent le même problème.</span><span class="sxs-lookup"><span data-stu-id="db7ea-145">Error identifiers are useful only when they correspond to identifiers that are seen by other users who are experiencing the same problem.</span></span>

### <a name="error-categories"></a><span data-ttu-id="db7ea-146">Catégories d’erreur</span><span class="sxs-lookup"><span data-stu-id="db7ea-146">Error Categories</span></span>

<span data-ttu-id="db7ea-147">Catégories d’erreur permettent de regrouper des erreurs pour l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="db7ea-147">Error categories are used to group errors for the end-user.</span></span> <span data-ttu-id="db7ea-148">Windows PowerShell définit ces catégories et les applets de commande et les fournisseurs Windows PowerShell doivent choisir entre eux lors de la génération de l’enregistrement d’erreur.</span><span class="sxs-lookup"><span data-stu-id="db7ea-148">Windows PowerShell defines these categories and cmdlets and Windows PowerShell providers must choose between them when generating the error record.</span></span>

<span data-ttu-id="db7ea-149">Pour obtenir une description des catégories d’erreur qui sont disponibles, consultez le [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) énumération.</span><span class="sxs-lookup"><span data-stu-id="db7ea-149">For a description of the error categories that are available, see the [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) enumeration.</span></span> <span data-ttu-id="db7ea-150">En règle générale, évitez d’utiliser NoError UndefinedError et erreur générique chaque fois que possible.</span><span class="sxs-lookup"><span data-stu-id="db7ea-150">In general, you should avoid using NoError, UndefinedError, and GenericError whenever possible.</span></span>

<span data-ttu-id="db7ea-151">Les utilisateurs peuvent afficher des erreurs lorsqu’ils définis selon la catégorie «`$ErrorView`» à « CategoryView ».</span><span class="sxs-lookup"><span data-stu-id="db7ea-151">Users can view errors based on category when they set "`$ErrorView`" to "CategoryView".</span></span>

## <a name="see-also"></a><span data-ttu-id="db7ea-152">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="db7ea-152">See Also</span></span>

[<span data-ttu-id="db7ea-153">Applets de commande Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="db7ea-153">Windows PowerShell Cmdlets</span></span>](./cmdlet-overview.md)

[<span data-ttu-id="db7ea-154">Sortie de l’applet de commande</span><span class="sxs-lookup"><span data-stu-id="db7ea-154">Cmdlet Output</span></span>](./types-of-cmdlet-output.md)

[<span data-ttu-id="db7ea-155">Interpréteur de commandes Windows PowerShell SDK</span><span class="sxs-lookup"><span data-stu-id="db7ea-155">Windows PowerShell Shell SDK</span></span>](../windows-powershell-reference.md)
