---
title: Rapport d’erreurs d’applet de commande | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- error records [PowerShell], terminating
- non-terminating errors [PowerShell]
- error records [PowerShell]
- terminating errors [PowerShell]
- error records [PowerShell], non-terminating
ms.assetid: 0b014035-52ea-44cb-ab38-bbe463c5465a
caps.latest.revision: 8
ms.openlocfilehash: 5dfec318438ca139518c596011ac5e56445738ea
ms.sourcegitcommit: 52a67bcd9d7bf3e8600ea4302d1fa8970ff9c998
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72365918"
---
# <a name="cmdlet-error-reporting"></a><span data-ttu-id="f7ee3-102">Rapport d’erreurs d’applet de commande</span><span class="sxs-lookup"><span data-stu-id="f7ee3-102">Cmdlet error reporting</span></span>

<span data-ttu-id="f7ee3-103">Les applets de commande doivent signaler les erreurs différemment selon que les erreurs se terminent par des erreurs ou qu’elles ne sont pas terminées.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-103">Cmdlets should report errors differently depending on whether the errors are terminating errors or nonterminating errors.</span></span> <span data-ttu-id="f7ee3-104">Les erreurs de fin sont des erreurs qui provoquent l’arrêt immédiat du pipeline, ou des erreurs qui se produisent lorsqu’il n’y a aucune raison de poursuivre le traitement.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-104">Terminating errors are errors that cause the pipeline to be terminated immediately, or errors that occur when there's no reason to continue processing.</span></span> <span data-ttu-id="f7ee3-105">Les erreurs sans fin d’opération sont les erreurs qui signalent une condition d’erreur actuelle, mais l’applet de commande peut continuer à traiter les objets d’entrée.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-105">Nonterminating errors are those errors that report a current error condition, but the cmdlet can continue to process input objects.</span></span> <span data-ttu-id="f7ee3-106">Avec les erreurs sans fin d’exécution, l’utilisateur est généralement averti du problème, mais l’applet de commande continue à traiter l’objet d’entrée suivant.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-106">With nonterminating errors, the user is typically notified of the problem, but the cmdlet continues to process the next input object.</span></span>

## <a name="terminating-and-nonterminating-errors"></a><span data-ttu-id="f7ee3-107">Erreurs de fin et de fin</span><span class="sxs-lookup"><span data-stu-id="f7ee3-107">Terminating and nonterminating errors</span></span>

<span data-ttu-id="f7ee3-108">Les instructions suivantes peuvent être utilisées pour déterminer si une condition d’erreur est une erreur de fin ou une erreur sans fin d’achèvement.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-108">The following guidelines can be used to determine if an error condition is a terminating error or a nonterminating error.</span></span>

- <span data-ttu-id="f7ee3-109">La condition d’erreur empêche-t-elle l’applet de commande de traiter d’autres objets d’entrée ?</span><span class="sxs-lookup"><span data-stu-id="f7ee3-109">Does the error condition prevent your cmdlet from successfully processing any further input objects?</span></span> <span data-ttu-id="f7ee3-110">Dans ce cas, il s’agit d’une erreur de fin.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-110">If so, this is a terminating error.</span></span>

- <span data-ttu-id="f7ee3-111">La condition d’erreur est-elle liée à un objet d’entrée spécifique ou à un sous-ensemble d’objets d’entrée ?</span><span class="sxs-lookup"><span data-stu-id="f7ee3-111">Is the error condition related to a specific input object or a subset of input objects?</span></span> <span data-ttu-id="f7ee3-112">Dans ce cas, il s’agit d’une erreur qui ne se termine pas.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-112">If so, this is a nonterminating error.</span></span>

- <span data-ttu-id="f7ee3-113">L’applet de commande accepte-t-elle plusieurs objets d’entrée, de sorte que le traitement peut être effectué sur un autre objet d’entrée ?</span><span class="sxs-lookup"><span data-stu-id="f7ee3-113">Does the cmdlet accept multiple input objects, such that processing may succeed on another input object?</span></span> <span data-ttu-id="f7ee3-114">Dans ce cas, il s’agit d’une erreur qui ne se termine pas.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-114">If so, this is a nonterminating error.</span></span>

- <span data-ttu-id="f7ee3-115">Les applets de commande qui peuvent accepter plusieurs objets d’entrée doivent décider des erreurs de fin et de fin, même si une situation particulière ne s’applique qu’à un seul objet d’entrée.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-115">Cmdlets that can accept multiple input objects should decide between what are terminating and nonterminating errors, even when a particular situation applies to only a single input object.</span></span>

- <span data-ttu-id="f7ee3-116">Les applets de commande peuvent recevoir un nombre quelconque d’objets d’entrée et envoyer un nombre quelconque d’objets de réussite ou d’erreur avant de lever une exception d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-116">Cmdlets can receive any number of input objects and send any number of success or error objects before throwing a terminating exception.</span></span> <span data-ttu-id="f7ee3-117">Il n’existe aucune relation entre le nombre d’objets d’entrée reçus et le nombre d’objets de réussite et d’erreur envoyés.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-117">There's no relationship between the number of input objects received and the number of success and error objects sent.</span></span>

- <span data-ttu-id="f7ee3-118">Les applets de commande qui peuvent accepter uniquement des objets d’entrée 0-1 et générer uniquement des objets de sortie 0-1 doivent traiter les erreurs comme des erreurs de fin et générer des exceptions de fin.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-118">Cmdlets that can accept only 0-1 input objects and generate only 0-1 output objects should treat errors as terminating errors and generate terminating exceptions.</span></span>

## <a name="reporting-nonterminating-errors"></a><span data-ttu-id="f7ee3-119">Signalement d’erreurs qui ne se terminent pas</span><span class="sxs-lookup"><span data-stu-id="f7ee3-119">Reporting nonterminating errors</span></span>

<span data-ttu-id="f7ee3-120">La création de rapports d’une erreur qui n’est pas terminée doit toujours être effectuée au sein de l’implémentation de l’applet de commande de la méthode [System. Management. Automation. applet de commande. BeginProcessing](/dotnet/api/System.Management.Automation.Cmdlet.BeginProcessing) , de la méthode [System. Management. Automation. cmdlet. ProcessRecord](/dotnet/api/System.Management.Automation.Cmdlet.ProcessRecord) , ou méthode [System. Management. Automation. applet de commande. EndProcessing](/dotnet/api/System.Management.Automation.Cmdlet.EndProcessing) .</span><span class="sxs-lookup"><span data-stu-id="f7ee3-120">The reporting of a nonterminating error should always be done within the cmdlet's implementation of the [System.Management.Automation.Cmdlet.BeginProcessing](/dotnet/api/System.Management.Automation.Cmdlet.BeginProcessing) method, the [System.Management.Automation.Cmdlet.ProcessRecord](/dotnet/api/System.Management.Automation.Cmdlet.ProcessRecord) method, or the [System.Management.Automation.Cmdlet.EndProcessing](/dotnet/api/System.Management.Automation.Cmdlet.EndProcessing) method.</span></span> <span data-ttu-id="f7ee3-121">Ces types d’erreurs sont signalés en appelant la méthode [System. Management. Automation. applet de commande. WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) qui, à son tour, envoie un enregistrement d’erreur au flux d’erreurs.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-121">These types of errors are reported by calling the [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) method that in turn sends an error record to the error stream.</span></span>

## <a name="reporting-terminating-errors"></a><span data-ttu-id="f7ee3-122">Signalement des erreurs de fin</span><span class="sxs-lookup"><span data-stu-id="f7ee3-122">Reporting terminating errors</span></span>

<span data-ttu-id="f7ee3-123">Les erreurs de fin sont signalées par la levée d’exceptions ou par l’appel de la méthode [System. Management. Automation. applet](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) de commande. ThrowTerminatingError.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-123">Terminating errors are reported by throwing exceptions or by calling the [System.Management.Automation.Cmdlet.ThrowTerminatingError](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) method.</span></span> <span data-ttu-id="f7ee3-124">Sachez que les applets de commande peuvent également intercepter et lever à nouveau des exceptions telles que **OutOfMemory**. Toutefois, elles ne sont pas requises pour lever à nouveau des exceptions, car le runtime PowerShell les intercepte également.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-124">Be aware that cmdlets can also catch and rethrow exceptions such as **OutOfMemory**, however, they aren't required to rethrow exceptions as the PowerShell runtime will catch them as well.</span></span>

<span data-ttu-id="f7ee3-125">Vous pouvez également définir vos propres exceptions pour les problèmes spécifiques à votre situation, ou ajouter des informations supplémentaires à une exception existante à l’aide de son enregistrement d’erreur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-125">You can also define your own exceptions for issues specific to your situation, or add additional information to an existing exception using its error record.</span></span>

## <a name="error-records"></a><span data-ttu-id="f7ee3-126">Enregistrements d’erreurs</span><span class="sxs-lookup"><span data-stu-id="f7ee3-126">Error records</span></span>

<span data-ttu-id="f7ee3-127">PowerShell décrit une condition d’erreur sans fin d’achèvement avec les objets [System. Management. Automation. ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) .</span><span class="sxs-lookup"><span data-stu-id="f7ee3-127">PowerShell describes a nonterminating error condition with [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) objects.</span></span> <span data-ttu-id="f7ee3-128">Chaque objet fournit des informations sur la catégorie d’erreur, un objet cible facultatif et des détails sur la condition d’erreur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-128">Each object provides error category information, an optional target object, and details about the error condition.</span></span>

### <a name="error-identifiers"></a><span data-ttu-id="f7ee3-129">Identificateurs d’erreur</span><span class="sxs-lookup"><span data-stu-id="f7ee3-129">Error identifiers</span></span>

<span data-ttu-id="f7ee3-130">L’identificateur d’erreur est une chaîne simple qui identifie la condition d’erreur dans l’applet de commande.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-130">The error identifier is a simple string that identifies the error condition within the cmdlet.</span></span>
<span data-ttu-id="f7ee3-131">PowerShell associe cet identificateur à un identificateur d’applet de commande pour créer un identificateur d’erreur complet qui peut être utilisé ultérieurement lors du filtrage des flux d’erreurs ou de la journalisation des erreurs, lors de la réponse à des erreurs spécifiques ou avec d’autres activités spécifiques à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-131">PowerShell combines this identifier with a cmdlet identifier to create a fully qualified error identifier that can be used later when filtering error streams or logging errors, when responding to specific errors, or with other user-specific activities.</span></span>

<span data-ttu-id="f7ee3-132">Les instructions suivantes doivent être suivies lors de la spécification des identificateurs d’erreur :</span><span class="sxs-lookup"><span data-stu-id="f7ee3-132">The following guidelines should be followed when specifying error identifiers:</span></span>

- <span data-ttu-id="f7ee3-133">Assignez des identificateurs d’erreur différents et très spécifiques aux différents chemins de code.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-133">Assign different, highly specific, error identifiers to different code paths.</span></span> <span data-ttu-id="f7ee3-134">Chaque chemin de code qui appelle [System. Management. Automation. applet de commande. WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) ou [System. Management. Automation. cmdlet. ThrowTerminatingError](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) doit avoir son propre identificateur d’erreur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-134">Each code path that calls [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) or [System.Management.Automation.Cmdlet.ThrowTerminatingError](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) should have its own error identifier.</span></span>

- <span data-ttu-id="f7ee3-135">Les identificateurs d’erreur doivent être uniques aux types d’exceptions CLR (Common Language Runtime) pour les erreurs de fin et sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-135">Error identifiers should be unique to Common Language Runtime (CLR) exception types for both terminating and nonterminating errors.</span></span>

- <span data-ttu-id="f7ee3-136">Ne modifiez pas la sémantique d’un identificateur d’erreur entre les versions de votre applet de commande ou du fournisseur PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-136">Don't change the semantics of an error identifier between versions of your cmdlet or PowerShell provider.</span></span> <span data-ttu-id="f7ee3-137">Une fois la sémantique d’un identificateur d’erreur établie, elle doit rester constante tout au long du cycle de vie de votre applet de commande.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-137">After the semantics of an error identifier is established, it should remain constant throughout the lifecycle of your cmdlet.</span></span>

- <span data-ttu-id="f7ee3-138">Pour les erreurs de fin, utilisez un identificateur d’erreur unique pour un type d’exception CLR particulier.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-138">For terminating errors, use a unique error identifier for a particular CLR exception type.</span></span> <span data-ttu-id="f7ee3-139">Si le type d’exception change, utilisez un nouvel identificateur d’erreur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-139">If the exception type changes, use a new error identifier.</span></span>

- <span data-ttu-id="f7ee3-140">Pour les erreurs qui ne se terminent pas, utilisez un identificateur d’erreur spécifique pour un objet d’entrée spécifique.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-140">For nonterminating errors, use a specific error identifier for a specific input object.</span></span>

- <span data-ttu-id="f7ee3-141">Choisissez du texte pour l’identificateur que tersely correspond à l’erreur signalée.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-141">Choose text for the identifier that tersely corresponds to the error being reported.</span></span> <span data-ttu-id="f7ee3-142">N’utilisez pas d’espace blanc ou de ponctuation.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-142">Don't use white space or punctuation.</span></span>

- <span data-ttu-id="f7ee3-143">Ne générez pas d’identificateurs d’erreur qui ne sont pas reproductibles.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-143">Don't generate error identifiers that aren't reproducible.</span></span> <span data-ttu-id="f7ee3-144">Par exemple, ne générez pas d’identificateurs qui incluent un identificateur de processus.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-144">For example, don't generate identifiers that include a process identifier.</span></span> <span data-ttu-id="f7ee3-145">Les identificateurs d’erreur sont utiles uniquement lorsqu’ils correspondent à des identificateurs qui sont visibles par d’autres utilisateurs qui rencontrent le même problème.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-145">Error identifiers are useful only when they correspond to identifiers that are seen by other users who are experiencing the same problem.</span></span>

### <a name="error-categories"></a><span data-ttu-id="f7ee3-146">Catégories d’erreur</span><span class="sxs-lookup"><span data-stu-id="f7ee3-146">Error categories</span></span>

<span data-ttu-id="f7ee3-147">Les catégories d’erreur sont utilisées pour regrouper les erreurs de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-147">Error categories are used to group errors for the user.</span></span> <span data-ttu-id="f7ee3-148">PowerShell définit ces catégories et ces applets de commande, et les fournisseurs PowerShell doivent choisir entre eux lors de la génération de l’enregistrement d’erreur.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-148">PowerShell defines these categories and cmdlets and PowerShell providers must choose between them when generating the error record.</span></span>

<span data-ttu-id="f7ee3-149">Pour obtenir une description des catégories d’erreurs disponibles, consultez l’énumération [System. Management. Automation. ErrorCategory](/dotnet/api/System.Management.Automation.ErrorCategory) .</span><span class="sxs-lookup"><span data-stu-id="f7ee3-149">For a description of the error categories that are available, see the [System.Management.Automation.ErrorCategory](/dotnet/api/System.Management.Automation.ErrorCategory) enumeration.</span></span> <span data-ttu-id="f7ee3-150">En général, vous devez éviter d’utiliser **NOERROR**, **UndefinedError**et **erreur générique** dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-150">In general, you should avoid using **NoError**, **UndefinedError**, and **GenericError** whenever possible.</span></span>

<span data-ttu-id="f7ee3-151">Les utilisateurs peuvent afficher les erreurs en fonction de la catégorie lorsqu’ils définissent `$ErrorView` sur **CategoryView**.</span><span class="sxs-lookup"><span data-stu-id="f7ee3-151">Users can view errors based on category when they set `$ErrorView` to **CategoryView**.</span></span>

## <a name="see-also"></a><span data-ttu-id="f7ee3-152">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f7ee3-152">See also</span></span>

[<span data-ttu-id="f7ee3-153">Présentation des applets de commande</span><span class="sxs-lookup"><span data-stu-id="f7ee3-153">Cmdlet Overview</span></span>](./cmdlet-overview.md)

[<span data-ttu-id="f7ee3-154">Types de sortie de l’applet de commande</span><span class="sxs-lookup"><span data-stu-id="f7ee3-154">Types of Cmdlet Output</span></span>](./types-of-cmdlet-output.md)

[<span data-ttu-id="f7ee3-155">Informations de référence sur Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f7ee3-155">Windows PowerShell Reference</span></span>](../windows-powershell-reference.md)
