---
ms.date: 09/13/2016
ms.topic: reference
title: Guide pratique pour créer un shell de console
description: Guide pratique pour créer un shell de console
ms.openlocfilehash: 9ea67c43b1ee35b1fbfc553b22a1423419317ca2
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/10/2020
ms.locfileid: "92657218"
---
# <a name="how-to-create-a-console-shell"></a><span data-ttu-id="7d1f2-103">Guide pratique pour créer un shell de console</span><span class="sxs-lookup"><span data-stu-id="7d1f2-103">How to Create a Console Shell</span></span>

<span data-ttu-id="7d1f2-104">Windows PowerShell fournit un outil de Make-Shell, également appelé « make-Kit », qui est utilisé pour créer un interpréteur de commandes de console qui n’est pas extensible.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-104">Windows PowerShell provides a Make-Shell tool, also referred to as the "make-kit", that is used to create a console shell that is not extensible.</span></span> <span data-ttu-id="7d1f2-105">Les coques créées avec ce nouvel outil ne peuvent pas être étendues ultérieurement via un composant logiciel enfichable Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-105">Shells created with this new tool cannot be extended later through a Windows PowerShell snap-in.</span></span>

## <a name="syntax"></a><span data-ttu-id="7d1f2-106">Syntaxe</span><span class="sxs-lookup"><span data-stu-id="7d1f2-106">Syntax</span></span>

<span data-ttu-id="7d1f2-107">Voici la syntaxe utilisée pour exécuter Make-Shell à partir d’un fichier make-file.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-107">Here is the syntax used to run Make-Shell from within a make-file.</span></span>

```
make-shell
  -out n.exe
  -namespace ns
  [ -lib libdirectory1[,libdirectory2,..] ]
  [ -reference ca1.dll[,ca2.dll,...] ]
  [ -formatdata fd1.format.ps1xml[,fd2.format.ps1xml,...] ]
  [ -typedata td1.type.ps1xml[,td2.type.ps1xml,...] ]
  [ -source c1.cs [,c2.cs,...] ]
  [ -authorizationmanager authorizationManagerType ]
  [ -win32icon i.ico ]
  [ -initscript p.ps1 ]
  [ -builtinscript s1.ps1[,s2.ps1,...] ]
  [ -resource resourcefile.txt ]
  [ -cscflags cscFlags ]
  [ -? | -help ]
```

## <a name="parameters"></a><span data-ttu-id="7d1f2-108">Paramètres</span><span class="sxs-lookup"><span data-stu-id="7d1f2-108">Parameters</span></span>

<span data-ttu-id="7d1f2-109">Voici une brève description des paramètres de make-shell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-109">Here is a brief description of the parameters of Make-Shell.</span></span>

> [!CAUTION]
> <span data-ttu-id="7d1f2-110">Les chemins d’accès UNC aux assemblys ne sont pas pris en charge par make-shell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-110">UNC paths to assemblies are not supported by Make-Shell.</span></span>

|<span data-ttu-id="7d1f2-111">Paramètre</span><span class="sxs-lookup"><span data-stu-id="7d1f2-111">Parameter</span></span>|<span data-ttu-id="7d1f2-112">Description</span><span class="sxs-lookup"><span data-stu-id="7d1f2-112">Description</span></span>|
|---------------|-----------------|
|<span data-ttu-id="7d1f2-113">-out n.exe</span><span class="sxs-lookup"><span data-stu-id="7d1f2-113">-out n.exe</span></span>|<span data-ttu-id="7d1f2-114">Obligatoire.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-114">Required.</span></span> <span data-ttu-id="7d1f2-115">Nom de l’interpréteur de commandes à produire.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-115">The name of the shell to produce.</span></span> <span data-ttu-id="7d1f2-116">Le chemin d’accès est spécifié dans le cadre de ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-116">The path is specified as part of this parameter.</span></span><br /><br /> <span data-ttu-id="7d1f2-117">Make-shell ajoute « . exe » à cette valeur, s’il n’est pas spécifié.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-117">Make-shell will append ".exe" to this value if it is not specified.</span></span> <span data-ttu-id="7d1f2-118">**Attention :**  Ne créez pas de fichier de sortie portant le même nom que le fichier. dll référencé.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-118">**Caution:**  Do not create an output file with the same name as the referenced .dll file.</span></span> <span data-ttu-id="7d1f2-119">Si vous tentez cette opération, l’outil Make-Shell crée un fichier. cs portant le même nom, ce qui remplacera le fichier. cs qui contient le code source de votre applet de commande.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-119">If you attempt this, the Make-Shell tool creates a .cs file with the same name, which will overwrite the .cs file that has your cmdlet source code.</span></span>|
|<span data-ttu-id="7d1f2-120">-namespace NS</span><span class="sxs-lookup"><span data-stu-id="7d1f2-120">-namespace ns</span></span>|<span data-ttu-id="7d1f2-121">Obligatoire.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-121">Required.</span></span> <span data-ttu-id="7d1f2-122">Espace de noms à utiliser pour la classe [System. Management. Automation. instances d’exécution. Runspaceconfiguration](/dotnet/api/System.Management.Automation.Runspaces.RunspaceConfiguration) dérivée que make-Kit génère et compile.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-122">The namespace to use for the derived [System.Management.Automation.Runspaces.Runspaceconfiguration](/dotnet/api/System.Management.Automation.Runspaces.RunspaceConfiguration) class that the make-kit generates and compiles.</span></span>|
|<span data-ttu-id="7d1f2-123">-lib libdirectory1 [, libdirectory2,..]</span><span class="sxs-lookup"><span data-stu-id="7d1f2-123">-lib libdirectory1[,libdirectory2,..]</span></span>|<span data-ttu-id="7d1f2-124">Les répertoires dans lesquels sont recherchés les assemblys .NET, y compris les assemblys Windows PowerShell, les assemblys spécifiés par le `reference` paramètre, les assemblys indirectement référencés par un autre assembly et les assemblys système .net.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-124">The directories that are searched for .NET assemblies, including the Windows PowerShell assemblies, assemblies specified by the `reference` parameter, assemblies indirectly referenced by another assembly, and the .NET system assemblies.</span></span>|
|<span data-ttu-id="7d1f2-125">-Reference ca1.dll [, ca2.dll,...]</span><span class="sxs-lookup"><span data-stu-id="7d1f2-125">-reference ca1.dll[,ca2.dll,...]</span></span>|<span data-ttu-id="7d1f2-126">Liste séparée par des virgules des assemblys à inclure dans l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-126">A comma-separated list of the assemblies to include in the shell.</span></span> <span data-ttu-id="7d1f2-127">Ces assemblys incluent tous les assemblys d’applet de commande et de fournisseur, ainsi que les assemblys de ressource qui doivent être chargés.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-127">These assemblies  includes all cmdlet and provider assemblies, as well as resource assemblies that should be loaded.</span></span> <span data-ttu-id="7d1f2-128">Si ce paramètre n’est pas spécifié, un interpréteur de commandes qui contient uniquement les applets de commande et les fournisseurs de base fournis par Windows PowerShell est généré.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-128">If this parameter is not specified, then a shell is produced that contains only the core cmdlets and providers provided by Windows PowerShell.</span></span><br /><br /> <span data-ttu-id="7d1f2-129">Les assemblys peuvent être spécifiés à l’aide de leur chemin d’accès complet. dans le cas contraire, ils seront recherchés à l’aide du chemin d’accès spécifié par le `lib` paramètre.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-129">The assemblies can be specified using their full path, otherwise they will be searched for using the path specified by the `lib` parameter.</span></span>|
|<span data-ttu-id="7d1f2-130">-FormatData fd1.format.ps1XML [, fd2.format.ps1XML,...]</span><span class="sxs-lookup"><span data-stu-id="7d1f2-130">-formatdata fd1.format.ps1xml[,fd2.format.ps1xml,...]</span></span>|<span data-ttu-id="7d1f2-131">Liste séparée par des virgules des données de format à inclure dans l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-131">A comma-separated list of format data to include in the shell.</span></span> <span data-ttu-id="7d1f2-132">Si ce paramètre n’est pas spécifié, un interpréteur de commandes qui contient uniquement les données de format fournies par Windows PowerShell est généré.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-132">If this parameter is not specified, then a shell is produced that contains only the format data provided by Windows PowerShell.</span></span>|
|<span data-ttu-id="7d1f2-133">-TypeData td1.type.ps1XML [, td2.type.ps1XML,...]</span><span class="sxs-lookup"><span data-stu-id="7d1f2-133">-typedata td1.type.ps1xml[,td2.type.ps1xml,...]</span></span>|<span data-ttu-id="7d1f2-134">Liste séparée par des virgules des données de type à inclure dans l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-134">A comma-separated list of type data to include in the shell.</span></span> <span data-ttu-id="7d1f2-135">Si ce paramètre n’est pas spécifié, un interpréteur de commandes qui contient uniquement les données de type fournies par Windows PowerShell est généré.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-135">If this parameter is not specified, then a shell is produced that contains only the type data provided by Windows PowerShell.</span></span>|
|<span data-ttu-id="7d1f2-136">-source c1.cs [, c2.cs,...]</span><span class="sxs-lookup"><span data-stu-id="7d1f2-136">-source c1.cs [,c2.cs,...]</span></span>|<span data-ttu-id="7d1f2-137">Nom d’un fichier, fourni par le développeur de l’interpréteur de commandes, qui contient le code source nécessaire pour générer le shell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-137">The name of a file, provided by the shell developer, that contains any source code needed to build the shell.</span></span><br /><br /> <span data-ttu-id="7d1f2-138">Le fichier de code source peut contenir l’un des codes source suivants :</span><span class="sxs-lookup"><span data-stu-id="7d1f2-138">The source code file can contain any of the following source code:</span></span><br /><br /> <span data-ttu-id="7d1f2-139">: Implémentation du gestionnaire d’autorisations qui remplace le gestionnaire d’autorisations par défaut.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-139">-   The Authorization manager implementation that overrides the default authorization manager.</span></span> <span data-ttu-id="7d1f2-140">(Cela peut également être fourni dans un assembly.)</span><span class="sxs-lookup"><span data-stu-id="7d1f2-140">(This could also be supplied compiled into an assembly.)</span></span><br /><span data-ttu-id="7d1f2-141">-Déclarations d’attribut d’informations d’assembly : telles que AssemblyCompanyAttribute, AssemblyCopyrightAttribute, AssemblyFileVersionAttribute, AssemblyInformationalVersionAttribute, AssemblyProductAttribute et AssemblyTrademarkAttribute.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-141">-   Assembly informational attribute declarations: such as the AssemblyCompanyAttribute, AssemblyCopyrightAttribute, AssemblyFileVersionAttribute, AssemblyInformationalVersionAttribute, AssemblyProductAttribute, and AssemblyTrademarkAttribute.</span></span>|
|<span data-ttu-id="7d1f2-142">-authorizationmanager authorizationManagerType</span><span class="sxs-lookup"><span data-stu-id="7d1f2-142">-authorizationmanager authorizationManagerType</span></span>|<span data-ttu-id="7d1f2-143">Type qui contient l’implémentation du gestionnaire d’autorisations.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-143">The type that contains the authorization manager implementation.</span></span> <span data-ttu-id="7d1f2-144">Cela peut être défini dans le code source ou compilé dans un assembly (spécifié par le `reference` paramètre).</span><span class="sxs-lookup"><span data-stu-id="7d1f2-144">This can be defined in source code, or compiled into an assembly (specified by the `reference` parameter).</span></span> <span data-ttu-id="7d1f2-145">Si ce paramètre n’est pas spécifié, le gestionnaire de sécurité par défaut est utilisé.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-145">If this parameter is not specified, the default security manager is used.</span></span> <span data-ttu-id="7d1f2-146">La valeur doit être le nom de type complet, y compris les espaces de noms.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-146">The value should be the full type name, including namespaces.</span></span>|
|<span data-ttu-id="7d1f2-147">-win32icon i. ico</span><span class="sxs-lookup"><span data-stu-id="7d1f2-147">-win32icon i.ico</span></span>|<span data-ttu-id="7d1f2-148">Icône du fichier. exe pour l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-148">The icon for the .exe file for the shell.</span></span> <span data-ttu-id="7d1f2-149">S’il n’est pas spécifié, l’interpréteur de commandes aura l’icône include par le compilateur c# (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="7d1f2-149">If not specified, then the shell will have the icon that the c# compiler includes (if any).</span></span>|
|<span data-ttu-id="7d1f2-150">-initscript p.ps1</span><span class="sxs-lookup"><span data-stu-id="7d1f2-150">-initscript p.ps1</span></span>|<span data-ttu-id="7d1f2-151">Profil de démarrage de l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-151">The startup profile for the shell.</span></span> <span data-ttu-id="7d1f2-152">Le fichier est inclus « en l’or »; aucune vérification de validité n’est effectuée par make-shell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-152">The file is included "as-is"; no validity checking is done by Make-Shell.</span></span>|
|<span data-ttu-id="7d1f2-153">-builtinscript s1.ps1 [, s2.ps1,...]</span><span class="sxs-lookup"><span data-stu-id="7d1f2-153">-builtinscript s1.ps1[,s2.ps1,...]</span></span>|<span data-ttu-id="7d1f2-154">Liste de scripts intégrés pour l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-154">A list of built-in scripts for the shell.</span></span> <span data-ttu-id="7d1f2-155">Ces scripts sont découverts avant les scripts dans le chemin d’accès et leur contenu ne peut pas être modifié une fois l’interpréteur de commandes généré.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-155">These scripts are discovered before scripts in the path, and their contents cannot be changed once the shell is built.</span></span><br /><br /> <span data-ttu-id="7d1f2-156">Les fichiers sont inclus « en l’absence »; aucune vérification de validité n’est effectuée par make-shell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-156">The files are included "as-is"; no validity checking is done by Make-Shell.</span></span>|
|<span data-ttu-id="7d1f2-157">-ressource resourcefile.txt</span><span class="sxs-lookup"><span data-stu-id="7d1f2-157">-resource resourcefile.txt</span></span>|<span data-ttu-id="7d1f2-158">Fichier. txt contenant les ressources d’aide et de bannière pour l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-158">The .txt file containing help and banner resources for the shell.</span></span> <span data-ttu-id="7d1f2-159">La première ressource est nommée ShellHelp et contient le texte affiché si l’interpréteur de commandes est appelé avec le `help` paramètre.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-159">The first resource is named ShellHelp, and contains the text displayed if the shell is invoked with the `help` parameter.</span></span> <span data-ttu-id="7d1f2-160">La deuxième ressource est nommée ShellBanner et contient le texte et les informations de copyright affichés lorsque l’interpréteur de commandes est lancé en mode interactif.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-160">The second resource is named ShellBanner, and it contains the text and copyright information displayed when the shell is launched in interactive mode.</span></span><br /><br /> <span data-ttu-id="7d1f2-161">Si ce paramètre n’est pas fourni, ou si ces ressources ne sont pas présentes, une aide et une bannière génériques sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-161">If this parameter is not provided, or these resources are not present, then a generic help and banner are used.</span></span>|
|<span data-ttu-id="7d1f2-162">-cscflags cscFlags</span><span class="sxs-lookup"><span data-stu-id="7d1f2-162">-cscflags cscFlags</span></span>|<span data-ttu-id="7d1f2-163">Indicateurs qui doivent être passés au compilateur C# (csc.exe).</span><span class="sxs-lookup"><span data-stu-id="7d1f2-163">Flags that should be passed to the C# compiler (csc.exe).</span></span> <span data-ttu-id="7d1f2-164">Celles-ci sont transmises sans modification.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-164">These are passed through unchanged.</span></span> <span data-ttu-id="7d1f2-165">Si ce paramètre comprend des espaces, il doit être placé entre guillemets doubles.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-165">If this parameter includes spaces, it should be surrounded in double-quotes.</span></span>|
|<span data-ttu-id="7d1f2-166">-?</span><span class="sxs-lookup"><span data-stu-id="7d1f2-166">-?</span></span><br /><br /> <span data-ttu-id="7d1f2-167">-help</span><span class="sxs-lookup"><span data-stu-id="7d1f2-167">-help</span></span>|<span data-ttu-id="7d1f2-168">Affiche le message de copyright et les options de ligne de commande Make-Shell.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-168">Displays the copyright message and Make-Shell command line options.</span></span>|
|<span data-ttu-id="7d1f2-169">-verbose</span><span class="sxs-lookup"><span data-stu-id="7d1f2-169">-verbose</span></span>|<span data-ttu-id="7d1f2-170">Affiche des informations détaillées pendant la création de l’interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="7d1f2-170">Displays detailed information while the shell is being created.</span></span>|

## <a name="see-also"></a><span data-ttu-id="7d1f2-171">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7d1f2-171">See Also</span></span>

[<span data-ttu-id="7d1f2-172">Guide de programmation pour Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="7d1f2-172">Windows PowerShell Programmer's Guide</span></span>](./windows-powershell-programmer-s-guide.md)

[<span data-ttu-id="7d1f2-173">Windows PowerShell SDK</span><span class="sxs-lookup"><span data-stu-id="7d1f2-173">Windows PowerShell SDK</span></span>](../windows-powershell-reference.md)
