---
ms.date: 2017-06-27
keywords: powershell,applet de commande
title: "Règles d’autorisation et fonctionnalités de sécurité d’Accès Web Windows PowerShell"
ms.openlocfilehash: 6b50fdc0f2854d8af6147432fed1a155d26f57e7
ms.sourcegitcommit: d6ab9ab5909ed59cce4ce30e29457e0e75c7ac12
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/08/2017
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="f3f78-103">Règles d’autorisation et fonctionnalités de sécurité d’Accès Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3f78-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="f3f78-104">Mise à jour : 24 juin 2013</span><span class="sxs-lookup"><span data-stu-id="f3f78-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="f3f78-105">S’applique à : Windows Server 2012 R2, Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="f3f78-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="f3f78-106">La fonctionnalité Accès Web Windows PowerShell dans Windows Server 2012 R2 et Windows Server 2012 a un modèle de sécurité restrictif.</span><span class="sxs-lookup"><span data-stu-id="f3f78-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span>
<span data-ttu-id="f3f78-107">Les utilisateurs doivent recevoir explicitement une autorisation d’accès avant de pouvoir se connecter à la passerelle Accès Web Windows PowerShell et utiliser la console web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="f3f78-108">Configuration des règles d’autorisation et de la sécurité du site</span><span class="sxs-lookup"><span data-stu-id="f3f78-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="f3f78-109">Une fois Accès Web Windows PowerShell installé et la passerelle configurée, les utilisateurs peuvent ouvrir la page de connexion dans un navigateur, mais ils ne peuvent pas se connecter tant que l’administrateur d’Accès Web Windows PowerShell ne leur a pas octroyé explicitement un accès.</span><span class="sxs-lookup"><span data-stu-id="f3f78-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span>
<span data-ttu-id="f3f78-110">Le contrôle d’accès d’« Accès Web Windows PowerShell » est géré à l’aide de l’ensemble des applets de commande Windows PowerShell décrit dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="f3f78-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span>
<span data-ttu-id="f3f78-111">Il n’existe aucune interface utilisateur graphique équivalente pour ajouter ou gérer les règles d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="f3f78-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="f3f78-112">Consultez [Applets de commande d’Accès Web Windows PowerShell](cmdlets/web-access-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="f3f78-112">See [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span></span>

<span data-ttu-id="f3f78-113">Les administrateurs peuvent définir entre 0 et *n* règles d’authentification pour Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-113">Administrators can define 0-*n* authentication rules for Windows PowerShell Web Access.</span></span>
<span data-ttu-id="f3f78-114">La sécurité par défaut est restrictive plutôt que permissive ; les règles à authentification zéro signifient qu’aucun utilisateur n’a accès à quoi que ce soit.</span><span class="sxs-lookup"><span data-stu-id="f3f78-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="f3f78-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) et [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) dans Windows Server 2012 R2 incluent un paramètre Credential qui permet d’ajouter et de tester les règles d’autorisation d’Accès Web Windows PowerShell depuis un ordinateur distant ou une session Accès Web Windows PowerShell active.</span><span class="sxs-lookup"><span data-stu-id="f3f78-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) and [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span>
<span data-ttu-id="f3f78-116">Comme avec d’autres applets de commande Windows PowerShell disposant d’un paramètre Credential, vous pouvez définir un objet PSCredential comme valeur du paramètre.</span><span class="sxs-lookup"><span data-stu-id="f3f78-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span>
<span data-ttu-id="f3f78-117">Pour créer un objet PSCredential qui contient les informations d’identification que vous souhaitez transmettre à un ordinateur distant, exécutez l’applet de commande [Get-Credential](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.security/Get-Credential).</span><span class="sxs-lookup"><span data-stu-id="f3f78-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="f3f78-118">Les règles d’authentification Accès Web Windows PowerShell sont des règles de liste verte.</span><span class="sxs-lookup"><span data-stu-id="f3f78-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span>
<span data-ttu-id="f3f78-119">Chaque règle est une définition d’une connexion autorisée entre des utilisateurs, des ordinateurs cibles et des [configurations de session](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) Windows PowerShell particulières (également appelées points de terminaison ou _instances d’exécution_) sur des ordinateurs cibles spécifiés.</span><span class="sxs-lookup"><span data-stu-id="f3f78-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShellÂ [session configurations](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="f3f78-120">Pour obtenir une explication sur **les instances d’exécution**, consultez [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="f3f78-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> <span data-ttu-id="f3f78-121">**Remarque sur la sécurité**</span><span class="sxs-lookup"><span data-stu-id="f3f78-121">**Security Note**</span></span>
>
> <span data-ttu-id="f3f78-122">Il suffit qu’une règle soit satisfaite pour qu’un utilisateur obtienne l’accès.</span><span class="sxs-lookup"><span data-stu-id="f3f78-122">A user needs only one rule to be true to get access.</span></span>
<span data-ttu-id="f3f78-123">Si un utilisateur se voit accorder l’accès à un seul ordinateur avec accès linguistique complet ou avec accès uniquement aux applets de commande de gestion à distance Windows PowerShell, depuis la console web, il peut se connecter à d’autres ordinateurs qui sont connectés au premier ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-123">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span>
<span data-ttu-id="f3f78-124">La façon la plus sûre de configurer Accès Web Windows PowerShell consiste à autoriser les utilisateurs à accéder uniquement à des configurations de session contrainte pour les autoriser à accomplir des tâches spécifiques qu’ils ont normalement besoin d’effectuer à distance.</span><span class="sxs-lookup"><span data-stu-id="f3f78-124">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="f3f78-125">Les applets de commande référencées dans [Applets de commande d’Accès Web Windows PowerShell](cmdlets/web-access-cmdlets.md) permettent de créer un ensemble de règles d’accès qui sont utilisées pour autoriser un utilisateur sur la passerelle Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-125">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span>
<span data-ttu-id="f3f78-126">Ces règles diffèrent des listes de contrôle d’accès sur l’ordinateur de destination et constituent une couche de sécurité supplémentaire pour l’accès par le Web.</span><span class="sxs-lookup"><span data-stu-id="f3f78-126">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span>
<span data-ttu-id="f3f78-127">La section suivante fournit davantage de détails sur la sécurité.</span><span class="sxs-lookup"><span data-stu-id="f3f78-127">More details about security are described in the following section.</span></span>

<span data-ttu-id="f3f78-128">Si des utilisateurs ne parviennent pas à traverser l’une des couches de sécurité précédentes, ils reçoivent un message générique « Accès refusé » dans leur fenêtre de navigateur.</span><span class="sxs-lookup"><span data-stu-id="f3f78-128">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span>
<span data-ttu-id="f3f78-129">Bien que les détails sur la sécurité soient consignés sur le serveur passerelle, aucune information n’est fournie aux utilisateurs finals quant au nombre de couches de sécurité qu’ils ont traversées ou quant à la couche au niveau de laquelle l’échec d’authentification ou de connexion a échoué.</span><span class="sxs-lookup"><span data-stu-id="f3f78-129">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="f3f78-130">Pour plus d’informations sur la configuration de règles d’autorisation, consultez [Configuration des règles d’autorisation](#configuring-authorization-rules-and-site-security) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="f3f78-130">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="f3f78-131">Sécurité</span><span class="sxs-lookup"><span data-stu-id="f3f78-131">Security</span></span>

<span data-ttu-id="f3f78-132">Le modèle de sécurité Accès Web Windows PowerShell comporte quatre couches entre un utilisateur final de la console web et un ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-132">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span>
<span data-ttu-id="f3f78-133">Les administrateurs d’Accès Web Windows PowerShell peuvent ajouter des couches de sécurité par le biais d’une configuration complémentaire dans la console du Gestionnaire des services Internet.</span><span class="sxs-lookup"><span data-stu-id="f3f78-133">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span>
<span data-ttu-id="f3f78-134">Pour plus d’informations sur la sécurisation des site web dans la console du Gestionnaire des services Internet, consultez [Configurer la sécurité du serveur web (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="f3f78-134">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>
<span data-ttu-id="f3f78-135">Pour plus d’informations sur les conseils d’utilisation d’IIS et la prévention des attaques par déni de service, consultez [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213) (Bonnes pratiques de prévention des attaques par déni de service).</span><span class="sxs-lookup"><span data-stu-id="f3f78-135">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="f3f78-136">Un administrateur peut également acheter et installer des logiciels d’authentification supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="f3f78-136">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="f3f78-137">Le tableau suivant décrit les quatre couches de sécurité entre les utilisateurs finals et les ordinateurs cibles.</span><span class="sxs-lookup"><span data-stu-id="f3f78-137">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="f3f78-138">Niveau</span><span class="sxs-lookup"><span data-stu-id="f3f78-138">Level</span></span>|<span data-ttu-id="f3f78-139">Couche</span><span class="sxs-lookup"><span data-stu-id="f3f78-139">Layer</span></span>|
|-|-|
|<span data-ttu-id="f3f78-140">1</span><span class="sxs-lookup"><span data-stu-id="f3f78-140">1</span></span>|[<span data-ttu-id="f3f78-141">fonctionnalités de sécurité du serveur web IIS</span><span class="sxs-lookup"><span data-stu-id="f3f78-141">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="f3f78-142">2</span><span class="sxs-lookup"><span data-stu-id="f3f78-142">2</span></span>|[<span data-ttu-id="f3f78-143">authentification de la passerelle basée sur les formulaires Accès Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3f78-143">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="f3f78-144">3</span><span class="sxs-lookup"><span data-stu-id="f3f78-144">3</span></span>|[<span data-ttu-id="f3f78-145">règles d’autorisation d’Accès Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3f78-145">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="f3f78-146">4</span><span class="sxs-lookup"><span data-stu-id="f3f78-146">4</span></span>|[<span data-ttu-id="f3f78-147">règles d’autorisation et d’authentification cibles</span><span class="sxs-lookup"><span data-stu-id="f3f78-147">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="f3f78-148">Vous pouvez trouver des informations détaillées sur chaque couche sous les titres suivants :</span><span class="sxs-lookup"><span data-stu-id="f3f78-148">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="f3f78-149">Fonctionnalités de sécurité du serveur web IIS</span><span class="sxs-lookup"><span data-stu-id="f3f78-149">IIS Web Server security features</span></span>

<span data-ttu-id="f3f78-150">Les utilisateurs d’Accès Web Windows PowerShell doivent toujours fournir un nom d’utilisateur et un mot de passe pour authentifier leurs comptes sur la passerelle.</span><span class="sxs-lookup"><span data-stu-id="f3f78-150">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span>
<span data-ttu-id="f3f78-151">Cependant, les administrateurs d’Accès Web Windows PowerShell peuvent également activer ou désactiver l’authentification facultative des certificats clients (consultez [installer et utiliser Accès Web Windows PowerShell](install-and-use-windows-powershell-web-access.md) pour activer un certificat de test puis pour configurer un certificat authentique).</span><span class="sxs-lookup"><span data-stu-id="f3f78-151">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="f3f78-152">Pour la fonctionnalité de certificat client facultatif, les utilisateurs doivent posséder un certificat client valide en plus de leur nom d’utilisateur/mot de passe. Cette fonctionnalité fait partie de la configuration du serveur web (IIS).</span><span class="sxs-lookup"><span data-stu-id="f3f78-152">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span>
<span data-ttu-id="f3f78-153">Quand la couche du certificat client est activée, la page de connexion à Accès Web Windows PowerShell invite les utilisateurs à fournir des certificats valides avant d’évaluer leurs informations d’identification de connexion.</span><span class="sxs-lookup"><span data-stu-id="f3f78-153">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span>
<span data-ttu-id="f3f78-154">L’authentification de certificat client vérifie automatiquement la présence du certificat client.</span><span class="sxs-lookup"><span data-stu-id="f3f78-154">Client certificate authentication automatically checks for the client certificate.</span></span>
<span data-ttu-id="f3f78-155">Si aucun certificat valide n’est trouvé, Accès Web Windows PowerShell en informe les utilisateurs, pour qu’ils puissent fournir ce certificat.</span><span class="sxs-lookup"><span data-stu-id="f3f78-155">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span>
<span data-ttu-id="f3f78-156">Si un certificat client valide est trouvé, Accès Web Windows PowerShell ouvre la page de connexion pour que les utilisateurs indiquent leur nom d’utilisateur et leur mot de passe.</span><span class="sxs-lookup"><span data-stu-id="f3f78-156">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="f3f78-157">Il s’agit d’un exemple de paramètres de sécurité supplémentaires offerts par le serveur Web IIS.</span><span class="sxs-lookup"><span data-stu-id="f3f78-157">This is one example of additional security settings that are offered by IIS Web Server.</span></span>
<span data-ttu-id="f3f78-158">Pour plus d’informations sur les autres fonctionnalités de sécurité IIS, consultez [Configurer la sécurité du serveur Web (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="f3f78-158">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278)</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="f3f78-159">Authentification de la passerelle basée sur les formulaires Accès Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3f78-159">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="f3f78-160">La page de connexion d’Accès Web Windows PowerShell requiert un ensemble d’informations d’identification (nom d’utilisateur et mot de passe) et offre aux utilisateurs la possibilité de fournir des informations d’identification différentes pour l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-160">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="f3f78-161">Si l’utilisateur ne fournit pas d’autres informations d’identification, le nom d’utilisateur et le mot de passe principaux utilisés pour se connecter à la passerelle sont également utilisés pour se connecter à l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-161">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="f3f78-162">Les informations d’identification requises sont authentifiées sur la passerelle Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-162">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span>
<span data-ttu-id="f3f78-163">Ces informations d’identification doivent être des comptes d’utilisateurs valides sur le serveur de passerelle Accès Web Windows PowerShell local ou dans Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f3f78-163">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="f3f78-164">Règles d’autorisation d’Accès Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3f78-164">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="f3f78-165">Une fois que l’utilisateur est authentifié au niveau de la passerelle, l’Accès Web Windows PowerShell passe en revue les règles d’autorisation pour vérifier si l’utilisateur a accès à l’ordinateur cible demandé.</span><span class="sxs-lookup"><span data-stu-id="f3f78-165">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span>
<span data-ttu-id="f3f78-166">Une fois que l’autorisation a été accordée; les informations d’identification de l’utilisateur sont transmises à l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-166">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="f3f78-167">Ces règles sont évaluées uniquement après qu’un utilisateur a été authentifié par la passerelle et avant qu’un utilisateur puisse être authentifié sur un ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-167">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="f3f78-168">Règles d’autorisation et d’authentification cibles</span><span class="sxs-lookup"><span data-stu-id="f3f78-168">Target authentication and authorization rules</span></span>

<span data-ttu-id="f3f78-169">La couche finale de sécurité pour Accès Web Windows PowerShell est la configuration de sécurité elle-même de l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-169">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span>
<span data-ttu-id="f3f78-170">Les utilisateurs doivent avoir les droits d’accès appropriés configurés sur l’ordinateur cible, ainsi que dans les règles d’autorisation d’Accès Web Windows PowerShell, pour exécuter une console web Windows PowerShell qui affecte un ordinateur cible par le biais d’Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-170">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="f3f78-171">Cette couche offre les mêmes mécanismes de sécurité que ceux qui évalueraient les tentatives de connexion si les utilisateurs créaient une session Windows PowerShell à distance sur un ordinateur cible depuis Windows PowerShell en exécutant les applets de commande [Enter-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/Enter-PSSession) ou [New-PSSession](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/new-pssession).</span><span class="sxs-lookup"><span data-stu-id="f3f78-171">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="f3f78-172">Par défaut, Accès Web Windows PowerShell utilise les nom d’utilisateur et mot de passe principaux pour l’authentification sur la passerelle et l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-172">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span>
<span data-ttu-id="f3f78-173">La page de connexion web, dans une section intitulée **Paramètres de connexion facultatifs**, permet aux utilisateurs de fournir si nécessaire des informations d’identification différentes pour l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-173">The web-based sign-in page , in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer , if they are required.</span></span>
<span data-ttu-id="f3f78-174">Si l’utilisateur ne fournit pas d’autres informations d’identification, le nom d’utilisateur et le mot de passe principaux utilisés pour se connecter à la passerelle sont également utilisés pour se connecter à l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-174">If the user does not provide alternate credentials , the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="f3f78-175">Les règles d’autorisation peuvent servir à accorder aux utilisateurs un accès à une configuration de session particulière.</span><span class="sxs-lookup"><span data-stu-id="f3f78-175">Authorization rules can be used to allow users access to a particular session configuration.</span></span>
<span data-ttu-id="f3f78-176">Vous pouvez créer des _instances d’exécution restreintes_ ou des configurations de session pour Accès Web Windows PowerShell, puis autoriser des utilisateurs spécifiques à se connecter uniquement à des configurations de session spécifiques quand ils se connectent à Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-176">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access , and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span>
<span data-ttu-id="f3f78-177">Vous pouvez utiliser des listes de contrôle d’accès pour identifier les utilisateurs qui ont accès à des points de terminaison spécifiques, et pour restreindre davantage l’accès à un point de terminaison pour un ensemble donné d’utilisateurs en appliquant les règles d’autorisation décrites dans cette section.</span><span class="sxs-lookup"><span data-stu-id="f3f78-177">You can use access control lists (ACLs) to determine which users have access to specific endpoints , and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span>
<span data-ttu-id="f3f78-178">Pour plus d’informations sur les instances d’exécution restreintes, consultez [Creating a constrained runspace](https://msdn.microsoft.com/en-us/library/dn614668).</span><span class="sxs-lookup"><span data-stu-id="f3f78-178">For more information about restricted runspaces, see [Creating a constrained runspace](https://msdn.microsoft.com/en-us/library/dn614668).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="f3f78-179">Configuration des règles d’autorisation</span><span class="sxs-lookup"><span data-stu-id="f3f78-179">Configuring authorization rules</span></span>

<span data-ttu-id="f3f78-180">Les administrateurs souhaitent probablement la même règle d’autorisation pour les utilisateurs d’Accès Web Windows PowerShell que celle déjà définie dans leur environnement pour la gestion à distance Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-180">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span>
<span data-ttu-id="f3f78-181">La première procédure de cette section décrit comment ajouter une règle d’autorisation sécurisée qui accorde l’accès à un utilisateur qui se connecte pour gérer un seul ordinateur dans une seule configuration de session.</span><span class="sxs-lookup"><span data-stu-id="f3f78-181">The first procedure in this section describes how to add a secure authorization rule that grants access to one user , signing in to manage one computer , and within a single session configuration.</span></span>
<span data-ttu-id="f3f78-182">La seconde procédure décrit comment supprimer une règle d’autorisation dont vous n’avez plus besoin.</span><span class="sxs-lookup"><span data-stu-id="f3f78-182">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="f3f78-183">Si vous prévoyez d’utiliser des configurations de session personnalisée pour autoriser des utilisateurs spécifiques à travailler uniquement dans des instances d’exécution restreintes dans Accès Web Windows PowerShell, créez vos configurations de session personnalisée avant d’ajouter des règles d’autorisation qui y font référence.</span><span class="sxs-lookup"><span data-stu-id="f3f78-183">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access , create your custom session configurations before you add authorization rules that refer to them.</span></span>
<span data-ttu-id="f3f78-184">Vous ne pouvez pas utiliser les applets de commande d’Accès Web Windows PowerShell pour créer des configurations de sessions personnalisées.</span><span class="sxs-lookup"><span data-stu-id="f3f78-184">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span>
<span data-ttu-id="f3f78-185">Pour plus d’informations sur la création de configurations de session personnalisée, consultez [About Session Configuration Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="f3f78-185">For more information about creating custom session configurations , see [about_Session_Configuration_Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="f3f78-186">Les applets de commande d’Accès Web Windows PowerShell ne prennent en charge qu’un seul caractère générique, l’astérisque ( \* ).</span><span class="sxs-lookup"><span data-stu-id="f3f78-186">Windows PowerShell Web Access cmdlets support one wildcard character , an asterisk ( \* ).</span></span>
<span data-ttu-id="f3f78-187">Les caractères génériques dans les chaînes ne sont pas pris en charge. Utilisez un seul astérisque par propriété (utilisateurs, ordinateurs ou configurations de sessions).</span><span class="sxs-lookup"><span data-stu-id="f3f78-187">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> <span data-ttu-id="f3f78-188">**Remarque**</span><span class="sxs-lookup"><span data-stu-id="f3f78-188">**Note**</span></span>
>
> <span data-ttu-id="f3f78-189">Pour d’autres façons d’utiliser des règles d’autorisation pour accorder un accès aux utilisateurs et mieux sécuriser l’environnement d’Accès Web Windows PowerShell, consultez [Autres exemples de scénarios de règles d’autorisation](#other-authorization-rule-scenario-examples) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="f3f78-189">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment , see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="f3f78-190">Pour ajouter une règle d’autorisation restrictive</span><span class="sxs-lookup"><span data-stu-id="f3f78-190">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="f3f78-191">Effectuez une des opérations suivantes pour ouvrir une session Windows PowerShell avec des droits utilisateur élevés.</span><span class="sxs-lookup"><span data-stu-id="f3f78-191">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

    - <span data-ttu-id="f3f78-192">Sur le Bureau Windows, cliquez avec le bouton droit dans la barre des tâches sur **Windows PowerShell**, puis cliquez sur **Exécuter en tant qu’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-192">On the Windows desktop, right-click **Windows PowerShell** on the taskbar , and then click **Run as Administrator**.</span></span>

    - <span data-ttu-id="f3f78-193">Dans l’écran d’**accueil** de Windows, cliquez avec le bouton droit sur **Windows PowerShell**, puis cliquez sur **Exécuter en tant qu’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-193">On the Windows **Start** screen, right-click **Windows PowerShell** , and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="f3f78-194">**Étape facultative** Pour restreindre l’accès utilisateur à l’aide de configurations de session :</span><span class="sxs-lookup"><span data-stu-id="f3f78-194">**Optional step** For restricting user access by using session configurations:</span></span>

    <span data-ttu-id="f3f78-195">Vérifiez que les configurations de session que vous voulez utiliser dans vos règles existent déjà.</span><span class="sxs-lookup"><span data-stu-id="f3f78-195">Verify that the session configurations that you want to use , already exist in your rules .</span></span>
<span data-ttu-id="f3f78-196">Si elles n’ont pas encore été créées, utilisez les instructions relatives à la création de configurations de session dans [About Session Configuration Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="f3f78-196">If they have not yet been created , use instructions for creating session configurations in [about_Session_Configuration_Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="f3f78-197">Cette règle d’autorisation accorde à un utilisateur spécifique l’accès à un ordinateur sur le réseau auquel il a généralement accès, avec un accès à une configuration de session spécifique limitée aux besoins habituels de l’utilisateur en matière de script et d’applet de commande.</span><span class="sxs-lookup"><span data-stu-id="f3f78-197">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user'™s typical scripting and cmdlet needs.</span></span> <span data-ttu-id="f3f78-198">Tapez ce qui suit, puis appuyez sur **Entrée**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-198">Type the following, and then press **Enter**.</span></span>

```powershell
Add-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
```

  - <span data-ttu-id="f3f78-199">Dans l’exemple suivant, un utilisateur nommé _JSmith_ dans le domaine _Contoso_ se voit accorder un accès pour gérer l’ordinateur _Contoso_214_ et utiliser une configuration de session nommée _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="f3f78-199">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

```powershell
Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
```

4. <span data-ttu-id="f3f78-200">Vérifiez que la règle a été créée en exécutant l’applet de commande **Get-PswaAuthorizationRule** ou **Test-PswaAuthorizationRule -UserName &lt;domain\\user | computer\\user&gt; -ComputerName** &lt;nom_ordinateur&gt;.</span><span class="sxs-lookup"><span data-stu-id="f3f78-200">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or **Test-PswaAuthorizationRule -UserName &lt;domain\\user | computer\\user&gt; -ComputerName** &lt;computer_name&gt;.</span></span> <span data-ttu-id="f3f78-201">Par exemple, **Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-201">For example, **Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214**.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="f3f78-202">Pour supprimer une règle d’autorisation</span><span class="sxs-lookup"><span data-stu-id="f3f78-202">To remove an authorization rule</span></span>

1. <span data-ttu-id="f3f78-203">Si aucune session Windows PowerShell n’est déjà ouverte, consultez l’étape 1 de la procédure [pour ajouter une règle d’autorisation restrictive](#to-add-a-restrictive-authorization-rule) dans cette section.</span><span class="sxs-lookup"><span data-stu-id="f3f78-203">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="f3f78-204">Tapez la commande suivante, puis appuyez sur **Entrée**, où *rule ID* représente l’ID unique de la règle à supprimer.</span><span class="sxs-lookup"><span data-stu-id="f3f78-204">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

```powershell
Remove-PswaAuthorizationRule -ID <rule ID>
```

<span data-ttu-id="f3f78-205">Si vous ne connaissez pas le numéro de l’ID mais que vous connaissez le nom convivial de la règle à supprimer, vous pouvez obtenir le nom de la règle, puis le faire suivre dans un pipe à l’applet de commande `Remove-PswaAuthorizationRule` pour supprimer la règle, comme dans l’exemple suivant : `Get-PswaAuthorizationRule -RuleName <rule-name> | Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="f3f78-205">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example: `Get-PswaAuthorizationRule -RuleName <rule-name> | Remove-PswaAuthorizationRule`.</span></span>

><span data-ttu-id="f3f78-206">**Remarque** :</span><span class="sxs-lookup"><span data-stu-id="f3f78-206">**Note**:</span></span>
>
><span data-ttu-id="f3f78-207">Vous n’êtes pas invité à confirmer la suppression de la règle d’autorisation spécifiée ; elle est supprimée quand vous appuyez sur **Entrée**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-207">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="f3f78-208">Soyez certain de vouloir supprimer la règle d’autorisation avant d’exécuter l’applet de commande `Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="f3f78-208">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="f3f78-209">Autres exemples de scénarios de règles d’autorisation</span><span class="sxs-lookup"><span data-stu-id="f3f78-209">Other authorization rule scenario examples</span></span>

<span data-ttu-id="f3f78-210">Chaque session Windows PowerShell utilise une configuration de session ; si aucune n’est spécifiée pour une session, Windows PowerShell utilise la configuration de session Windows PowerShell prédéfinie par défaut, appelée Microsoft.PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-210">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="f3f78-211">La configuration de session par défaut inclut toutes les applets de commande disponibles sur un ordinateur.</span><span class="sxs-lookup"><span data-stu-id="f3f78-211">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="f3f78-212">Les administrateurs peuvent limiter l’accès à tous les ordinateurs en définissant une configuration de session avec une instance d’exécution restreinte (une gamme limitée d’applets de commande et de tâches que les utilisateurs finals peuvent effectuer).</span><span class="sxs-lookup"><span data-stu-id="f3f78-212">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="f3f78-213">Un utilisateur auquel est accordé l’accès à un ordinateur avec accès linguistique complet ou uniquement les applets de commande de gestion à distance Windows PowerShell peut se connecter à d’autres ordinateurs qui sont connectés au premier ordinateur.</span><span class="sxs-lookup"><span data-stu-id="f3f78-213">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="f3f78-214">La définition d’une instance d’exécution restreinte peut empêcher les utilisateurs d’accéder à d’autres ordinateurs depuis leur instance d’exécution Windows PowerShell autorisée, et elle renforce la sécurité de votre environnement Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-214">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="f3f78-215">Il est possible de distribuer la configuration de session (à l’aide d’une stratégie de groupe) à tous les ordinateurs que les administrateurs veulent rendre accessibles par le biais d’Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-215">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="f3f78-216">Pour plus d’informations sur les configurations de session, consultez [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span><span class="sxs-lookup"><span data-stu-id="f3f78-216">For more information about session configurations, see [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span></span>
<span data-ttu-id="f3f78-217">Voici quelques exemples de ce scénario.</span><span class="sxs-lookup"><span data-stu-id="f3f78-217">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="f3f78-218">Un administrateur crée un point de terminaison, appelé **PswaEndpoint**, avec une instance d’exécution restreinte.</span><span class="sxs-lookup"><span data-stu-id="f3f78-218">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="f3f78-219">Ensuite, il crée une règle, **\*,\*,PswaEndpoint**, puis distribue le point de terminaison à d’autres ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="f3f78-219">Then, the administrator creates a rule, **\*,\*,PswaEndpoint**, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="f3f78-220">La règle permet à tous les utilisateurs d’accéder à tous les ordinateurs avec le point de terminaison **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-220">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span> <span data-ttu-id="f3f78-221">Si aucune autre règle d’autorisation n’est définie dans le jeu de règles, les ordinateurs n’ayant pas ce point de terminaison seront inaccessibles.</span><span class="sxs-lookup"><span data-stu-id="f3f78-221">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="f3f78-222">L’administrateur a créé un point de terminaison avec une instance d’exécution restreinte appelée **PswaEndpoint**, puis souhaite en restreindre l’accès à des utilisateurs spécifiques.</span><span class="sxs-lookup"><span data-stu-id="f3f78-222">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="f3f78-223">L’administrateur crée un groupe d’utilisateurs appelé **Level1Support**, puis définit la règle suivante : **Level1Support,\*,PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-223">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="f3f78-224">La règle accorde à tous les utilisateurs inclus dans le groupe **Level1Support** un accès à tous les ordinateurs dotés de la configuration **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-224">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="f3f78-225">De même, l’accès peut être limité à un ensemble d’ordinateurs spécifique.</span><span class="sxs-lookup"><span data-stu-id="f3f78-225">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="f3f78-226">Certains administrateurs accordent à certains utilisateurs un accès privilégié.</span><span class="sxs-lookup"><span data-stu-id="f3f78-226">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="f3f78-227">Par exemple, un administrateur crée deux groupes d’utilisateurs, **Admins** et **BasicSupport**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-227">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="f3f78-228">Il crée également un point de terminaison avec une instance d’exécution restreinte appelée **PswaEndpoint**, puis définit les deux règles suivantes : **Admins,\*,\*** et **BasicSupport,\*,PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-228">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="f3f78-229">La première règle octroie à tous les utilisateurs du groupe **Admin** un accès à tous les ordinateurs, et la seconde règle octroie à tous les utilisateurs du groupe **BasicSupport** un accès aux seuls ordinateurs dotés de **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-229">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="f3f78-230">Un administrateur a configuré un environnement de test privé et souhaite autoriser tous les utilisateurs réseau approuvés à accéder à tous les ordinateurs du réseau auxquels ils ont normalement accès, avec un accès à toutes les configurations de sessions auxquelles ils ont normalement accès.</span><span class="sxs-lookup"><span data-stu-id="f3f78-230">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="f3f78-231">S’agissant d’un environnement de test privé, l’administrateur crée une règle d’autorisation non sécurisée.</span><span class="sxs-lookup"><span data-stu-id="f3f78-231">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span>
  - <span data-ttu-id="f3f78-232">L’administrateur exécute l’applet de commande `Add-PswaAuthorizationRule * * *`, qui utilise le caractère générique **\*** pour représenter tous les utilisateurs, tous les ordinateurs et toutes les configurations.</span><span class="sxs-lookup"><span data-stu-id="f3f78-232">The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span>
  - <span data-ttu-id="f3f78-233">Cette règle est l’équivalent de la commande suivante : `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="f3f78-233">This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  ><span data-ttu-id="f3f78-234">**Remarque** :</span><span class="sxs-lookup"><span data-stu-id="f3f78-234">**Note**:</span></span>
  >
  ><span data-ttu-id="f3f78-235">Cette règle n’est pas recommandée dans un environnement sécurisé ; elle contourne la couche de sécurité de la règle d’autorisation fournie par Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-235">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="f3f78-236">Un administrateur doit autoriser les utilisateurs à se connecter aux ordinateurs cibles dans un environnement qui inclut à la fois des groupes de travail et des domaines, où les ordinateurs des groupes de travail sont de temps en temps utilisés pour se connecter aux ordinateurs cibles dans les domaines et où les ordinateurs des domaines sont de temps en temps utilisés pour se connecter aux ordinateurs cibles dans les groupes de travail.</span><span class="sxs-lookup"><span data-stu-id="f3f78-236">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="f3f78-237">L’administrateur possède un serveur de passerelle, *PswaServer*, dans un groupe de travail et l’ordinateur cible *srv1.contoso.com* se trouve dans un domaine.</span><span class="sxs-lookup"><span data-stu-id="f3f78-237">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="f3f78-238">L’utilisateur *Chris* est un utilisateur local autorisé à la fois sur le serveur de passerelle du groupe de travail et l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-238">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="f3f78-239">Son nom d’utilisateur sur le serveur du groupe de travail est *chrisLocal* et son nom d’utilisateur sur l’ordinateur cible est *contoso\\chris*.</span><span class="sxs-lookup"><span data-stu-id="f3f78-239">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="f3f78-240">Pour autoriser l’accès à srv1.contoso.com à Chris, l’administrateur ajoute la règle suivante.</span><span class="sxs-lookup"><span data-stu-id="f3f78-240">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="f3f78-241">L’exemple de règle précédent authentifie Chris sur le serveur de passerelle, puis autorise son accès à *srv1*.</span><span class="sxs-lookup"><span data-stu-id="f3f78-241">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="f3f78-242">Dans la page de connexion, Chris doit fournir un deuxième ensemble d’informations d’identification dans la zone **Paramètres de connexion facultatifs** (*contoso\\chris*).</span><span class="sxs-lookup"><span data-stu-id="f3f78-242">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="f3f78-243">Le serveur de passerelle utilise l’ensemble supplémentaire d’informations d’identification pour l’authentifier sur l’ordinateur cible, *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="f3f78-243">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="f3f78-244">Dans le scénario précédent, Accès Web Windows PowerShell établit une connexion correcte à l’ordinateur cible uniquement une fois que les opérations ci-après ont réussi et qu’au moins une règle d’autorisation l’a autorisée.</span><span class="sxs-lookup"><span data-stu-id="f3f78-244">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="f3f78-245">Authentification sur le serveur de passerelle du groupe de travail en ajoutant un nom d’utilisateur au format *nom_serveur*\\*nom_utilisateur* à la règle d’autorisation</span><span class="sxs-lookup"><span data-stu-id="f3f78-245">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="f3f78-246">Authentification sur l’ordinateur cible en utilisant les informations d’identification supplémentaires fournies dans la page de connexion, dans la zone **Paramètres de connexion facultatifs**</span><span class="sxs-lookup"><span data-stu-id="f3f78-246">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

  ><span data-ttu-id="f3f78-247">**Remarque** :</span><span class="sxs-lookup"><span data-stu-id="f3f78-247">**Note**:</span></span>
  >
  ><span data-ttu-id="f3f78-248">Si la passerelle et les ordinateurs cibles se trouvent dans des groupes de travail ou domaines différents, une relation d’approbation doit être établie entre les deux ordinateurs du groupe de travail, les deux domaines ou entre le groupe de travail et le domaine.</span><span class="sxs-lookup"><span data-stu-id="f3f78-248">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="f3f78-249">Il n’est pas possible de configurer cette relation à l’aide des applets de commande des règles d’autorisation d’Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-249">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="f3f78-250">Les règles d’autorisation ne définissent pas une relation d’approbation entre des ordinateurs ; elles peuvent uniquement autoriser les utilisateurs à se connecter à des ordinateurs cibles et configurations de sessions spécifiques.</span><span class="sxs-lookup"><span data-stu-id="f3f78-250">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="f3f78-251">Pour plus d’informations sur la manière de configurer une relation d’approbation entre différents domaines, consultez [Création d’approbations de domaine et de forêt](https://technet.microsoft.com/library/cc794775.aspx").</span><span class="sxs-lookup"><span data-stu-id="f3f78-251">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx").</span></span> <span data-ttu-id="f3f78-252">Pour plus d’informations sur la façon d’ajouter les ordinateurs d’un groupe de travail à une liste d’hôtes approuvés, consultez [Administration à distance à l’aide du Gestionnaire de serveur](https://technet.microsoft.com/library/dd759202.aspx).</span><span class="sxs-lookup"><span data-stu-id="f3f78-252">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](https://technet.microsoft.com/library/dd759202.aspx)</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="f3f78-253">Utilisation d’un seul jeu de règles d’autorisation pour plusieurs sites</span><span class="sxs-lookup"><span data-stu-id="f3f78-253">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="f3f78-254">Les règles d’autorisation sont stockées dans un fichier XML.</span><span class="sxs-lookup"><span data-stu-id="f3f78-254">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="f3f78-255">Par défaut, le nom du chemin du fichier XML est _%windir%\\Web\\PowershellWebAccess\\data\\AuthorizationRules.xml_.</span><span class="sxs-lookup"><span data-stu-id="f3f78-255">By default, the path name of the XML file is _%windir%\\Web\\PowershellWebAccess\\data\\AuthorizationRules.xml_.</span></span>

<span data-ttu-id="f3f78-256">Le chemin du fichier XML des règles d’autorisation est stocké dans le fichier **powwa.config**, qui se trouve dans _%windir%\\Web\\PowershellWebAccess\\data_.</span><span class="sxs-lookup"><span data-stu-id="f3f78-256">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in _%windir%\\Web\\PowershellWebAccess\\data_.</span></span> <span data-ttu-id="f3f78-257">L’administrateur peut modifier la référence au chemin par défaut dans **powwa.config** pour satisfaire des préférences ou exigences.</span><span class="sxs-lookup"><span data-stu-id="f3f78-257">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="f3f78-258">Autoriser l’administrateur à modifier l’emplacement du fichier permet à plusieurs passerelles Accès Web Windows PowerShell d’utiliser les mêmes règles d’autorisation, si une telle configuration est souhaitée.</span><span class="sxs-lookup"><span data-stu-id="f3f78-258">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="f3f78-259">Gestion des sessions</span><span class="sxs-lookup"><span data-stu-id="f3f78-259">Session management</span></span>

<span data-ttu-id="f3f78-260">Par défaut, Accès Web Windows PowerShell limite un utilisateur à trois sessions simultanées.</span><span class="sxs-lookup"><span data-stu-id="f3f78-260">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="f3f78-261">Vous pouvez modifier le fichier **web.config** de l’application web dans le Gestionnaire des services Internet afin de prendre en charge un nombre différent de sessions par utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f3f78-261">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span>
<span data-ttu-id="f3f78-262">Le chemin du fichier **web.config** est _$Env:Windir\\Web\\PowerShellWebAccess\\wwwroot\\Web.config_.</span><span class="sxs-lookup"><span data-stu-id="f3f78-262">The path to the **web.config** file is _$Env:Windir\\Web\\PowerShellWebAccess\\wwwroot\\Web.config_.</span></span>

<span data-ttu-id="f3f78-263">Par défaut, le serveur Web IIS est configuré pour redémarrer le pool d’applications si des paramètres sont modifiés.</span><span class="sxs-lookup"><span data-stu-id="f3f78-263">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="f3f78-264">Par exemple, le pool d’applications est redémarré si des modifications sont apportées au fichier **web.config**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-264">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span>
><span data-ttu-id="f3f78-265">Étant donné que **Accès Web Windows PowerShell** utilise les états de session en mémoire, les utilisateurs connectés à des sessions **Accès Web Windows PowerShell** perdent leurs sessions quand le pool d’applications est redémarré.</span><span class="sxs-lookup"><span data-stu-id="f3f78-265">Because **Windows PowerShell Web Access** uses in-memory session states, users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="f3f78-266">Définition de paramètres par défaut sur la page de connexion.</span><span class="sxs-lookup"><span data-stu-id="f3f78-266">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="f3f78-267">Si votre passerelle Accès Web Windows PowerShell s’exécute sur Windows Server 2012 R2, vous pouvez configurer les valeurs par défaut pour les paramètres affichés dans la page de connexion Accès Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-267">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="f3f78-268">Vous pouvez configurer les valeurs du fichier **web.config** décrit dans le paragraphe précédent.</span><span class="sxs-lookup"><span data-stu-id="f3f78-268">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="f3f78-269">Les valeurs par défaut des paramètres de la page de connexion se trouvent dans la section **appSettings** du fichier web.config ; ce qui suit est un exemple de la section **appSettings**.</span><span class="sxs-lookup"><span data-stu-id="f3f78-269">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="f3f78-270">Les valeurs valides pour la plupart de ces paramètres sont les mêmes que celles des paramètres correspondants de l’applet de commande [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) dans Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f3f78-270">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span></span>
<span data-ttu-id="f3f78-271">Par exemple, la clé `defaultApplicationName`, comme indiqué dans le bloc de code suivant, est la valeur de la variable de préférence **$PSSessionApplicationName** sur l’ordinateur cible.</span><span class="sxs-lookup"><span data-stu-id="f3f78-271">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
    <appSettings>
            <add key="maxSessionsAllowedPerUser" value="3"/>
            <add key="defaultPortNumber" value="5985"/>
            <add key="defaultSSLPortNumber" value="5986"/>
            <add key="defaultApplicationName" value="WSMAN"/>
            <add key="defaultUseSslSelection" value="0"/>
            <add key="defaultAuthenticationType" value="0"/>
            <add key="defaultAllowRedirection" value="0"/>
            <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
    </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="f3f78-272">Expirations de délais et déconnexions non planifiées</span><span class="sxs-lookup"><span data-stu-id="f3f78-272">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="f3f78-273">Les sessions Accès Web Windows PowerShell expirent. Dans Accès Web Windows PowerShell sur Windows Server 2012, un message d’expiration de délai est affiché après 15 minutes d’inactivité de session.</span><span class="sxs-lookup"><span data-stu-id="f3f78-273">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="f3f78-274">Si l’utilisateur ne répond pas dans les cinq minutes qui suivent l’affichage du message, la session est interrompue et l’utilisateur est déconnecté. Vous pouvez modifier les délais d’expiration des sessions dans les paramètres de site web, dans le Gestionnaire des services Internet.</span><span class="sxs-lookup"><span data-stu-id="f3f78-274">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="f3f78-275">Dans Accès Web Windows PowerShell sur Windows Server 2012 R2, les sessions expirent par défaut après 20 minutes d’inactivité.</span><span class="sxs-lookup"><span data-stu-id="f3f78-275">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="f3f78-276">Si les utilisateurs sont déconnectés de sessions de la console web en raison d’erreurs réseau ou d’autres défaillances ou arrêts non planifiés, et non parce qu’ils ont eux-mêmes fermé les sessions, les sessions Accès Web Windows PowerShell continuent de s’exécuter, connectées aux ordinateurs cibles, jusqu’à ce que le délai d’expiration côté client soit écoulé.</span><span class="sxs-lookup"><span data-stu-id="f3f78-276">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="f3f78-277">La session est déconnectée après les 20 minutes définies par défaut, ou au terme du délai spécifié par l’administrateur de la passerelle, le délai le plus court étant appliqué.</span><span class="sxs-lookup"><span data-stu-id="f3f78-277">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="f3f78-278">Si le serveur de passerelle exécute Windows Server 2012 R2, Accès Web Windows PowerShell permet aux utilisateurs de se reconnecter ultérieurement aux sessions enregistrées. Toutefois, quand des erreurs de réseau, des arrêts non planifiés ou d’autres défaillances provoquent la déconnexion des sessions, les utilisateurs ne peuvent pas accéder aux sessions enregistrées ou s’y reconnecter, tant que le délai d’expiration spécifié par l’administrateur de la passerelle n’est pas écoulé.</span><span class="sxs-lookup"><span data-stu-id="f3f78-278">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="f3f78-279">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f3f78-279">See Also</span></span>

- <span data-ttu-id="f3f78-280">[Installer et utiliser Accès Web Windows PowerShell](https://technet.microsoft.com/en-us/library/hh831611(v=ws.11).aspx)</span><span class="sxs-lookup"><span data-stu-id="f3f78-280">[Install and Use Windows PowerShell Web Access](https://technet.microsoft.com/en-us/library/hh831611(v=ws.11).aspx)</span></span>
- [<span data-ttu-id="f3f78-281">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="f3f78-281">about_Session_Configurations</span></span>](https://technet.microsoft.com/library/dd819508.aspx)
- [<span data-ttu-id="f3f78-282">Applets de commande d’Accès Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3f78-282">Windows PowerShell Web Access Cmdlets</span></span>](cmdlets/web-access-cmdlets.md)
